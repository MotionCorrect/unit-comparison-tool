import{a as n,t as l,c as ba}from"../chunks/disclose-version.CPnUnT6n.js";import"../chunks/legacy.BsVxgjQC.js";import{p as Nt,b as Ot,d as ta,g as r,m as ea,c as t,s,r as a,t as d,ab as Ka,ac as ha}from"../chunks/runtime.yMchOHVv.js";import{s as o}from"../chunks/render.Xvuyskh1.js";import{i as x}from"../chunks/if.DB1CdEBx.js";import{e as B,i as E}from"../chunks/each.F7LiJil5.js";import{N as zt,l as Pt,u as St,a as Ct,s as qa,b as Bt,c as Et}from"../chunks/Navbar.CzQKsZ6o.js";import{e as Tt}from"../chunks/events.BQn57Zl2.js";import{t as Ht,s as Rt}from"../chunks/index.C_DB0jUa.js";import{i as At}from"../chunks/lifecycle.DYMYQP0e.js";import{s as Ft,a as Ia}from"../chunks/store.DEMf0eFq.js";import{o as Lt}from"../chunks/index-client.7_sMiiH9.js";import{s as Ut}from"../chunks/entry.DBCkXKKI.js";import{b as Wt}from"../chunks/paths.C0NtJSLh.js";const $t=()=>{const T=Ut;return{page:{subscribe:T.page.subscribe},navigating:{subscribe:T.navigating.subscribe},updated:T.updated}},Kt={subscribe(T){return $t().page.subscribe(T)}};var qt=l('<span class="rounded-full bg-pink-500/20 px-3 py-1 text-sm font-medium text-pink-400"> </span>'),It=l('<button class="text-gray-400 transition-colors hover:text-white"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button>'),Jt=l('<div class="rounded px-2 py-1 hover:bg-gray-800/50"><span class="text-sm text-gray-200"> </span></div>'),Yt=l('<div class="rounded px-2 py-1"><span class="text-sm text-gray-400">No build options available</span></div>'),Zt=l('<div class="flex items-center gap-2"><span class="text-gray-500"> </span> <span class="text-gray-200"> </span></div>'),Gt=l('<div class="flex items-center gap-2"><span class="text-gray-500"> </span> <span class="text-gray-200"> </span></div>'),Qt=l('<div class="flex items-center gap-2 rounded px-2 text-sm text-gray-400 hover:bg-gray-800/50"><span> </span> <div class="ml-4 space-y-1"><!></div></div>'),Xt=l('<div class="flex items-center gap-2 rounded px-2 hover:bg-gray-800/50"><span class="text-sm text-gray-400"> </span> <span class="text-sm text-gray-200"> </span></div>'),ae=l('<div class="py-1"><!></div>'),te=l('<div><div class="rounded-lg border border-gray-700/50 bg-gray-900/95 p-4 shadow-xl"><div class="max-h-80 overflow-y-auto"><!></div></div></div>'),ee=l('<div class="mt-1 font-medium text-white"> </div>'),re=l('<div class="relative rounded-lg bg-gray-800/50 p-4 transition-colors hover:bg-gray-700/50"><div class="flex items-center justify-between"><span class="text-sm text-gray-400"> </span> <!></div> <!></div>'),se=l('<div class="flex gap-4"><span class="rounded-full bg-red-500/20 px-3 py-1 text-sm font-medium text-red-400"> </span> <span class="rounded-full bg-blue-500/20 px-3 py-1 text-sm font-medium text-blue-400"> </span></div>'),ie=l('<div class="rounded-lg border border-gray-700/30 bg-gray-800/50 p-4 transition-colors hover:bg-gray-700/50"><h3 class="mb-2 font-medium text-white"> </h3> <div class="space-y-3 text-sm"><div class="flex justify-between"><span class="text-gray-400">Damage</span> <span class="font-medium text-red-400"> </span></div> <div class="flex justify-between"><span class="text-gray-400">DPS</span> <span class="font-medium text-orange-400"> </span></div> <div class="flex justify-between"><span class="text-gray-400">Range</span> <span class="font-medium text-blue-400"> </span></div> <div class="flex justify-between"><span class="text-gray-400">Reload Time</span> <span class="font-medium text-purple-400"> </span></div></div></div>'),ne=l('<div class="mt-8 border-t border-gray-700/50 pt-6"><div class="mb-4 flex items-center justify-between"><h3 class="text-lg font-semibold text-white">Weapons</h3> <!></div> <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3"></div></div>'),oe=l('<section class="rounded-xl bg-gray-800/30 p-6"><div class="mb-6 flex items-center gap-3"><svg class="h-6 w-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></path></svg> <h2 class="text-xl font-semibold capitalize text-white"> </h2></div> <div class="grid gap-4 md:grid-cols-2 xl:grid-cols-3"></div> <!></section>'),le=l('<div class="rounded-lg bg-gray-800/50 p-4 transition-colors hover:bg-gray-700/50"><span class="text-sm text-gray-400"> </span> <div class="mt-1 font-medium text-white"> </div></div>'),de=l('<section class="rounded-xl bg-gray-800/30 p-6"><h2 class="text-xl font-semibold text-white">Custom Parameters</h2> <div class="grid gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"></div></section>'),ve=l('<div class="space-y-8"><header class="mb-8"><div class="mb-4 flex items-center justify-between"><h1 class="bg-gradient-to-r from-teal-400 to-blue-500 bg-clip-text text-4xl font-bold text-transparent"> </h1> <a class="rounded-lg bg-gray-800/50 px-4 py-2 text-sm font-medium text-gray-300 transition-colors hover:bg-gray-700/50">Back to Explorer</a></div> <div class="flex flex-wrap gap-3"><span class="rounded-full bg-teal-500/20 px-3 py-1 text-sm font-medium text-teal-400"> </span> <span class="rounded-full bg-orange-500/20 px-3 py-1 text-sm font-medium text-orange-400"> </span> <!> <span class="rounded-full bg-purple-500/20 px-3 py-1 text-sm font-medium text-purple-400"> </span></div></header> <!> <!></div>'),ce=l('<div class="flex h-[60vh] items-center justify-center text-center"><div><h2 class="mb-2 text-2xl text-gray-400">Loading unit data...</h2> <p class="text-gray-500">Please wait while we fetch the information.</p></div></div>'),me=l('<div class="min-h-screen bg-gray-900 text-gray-100"><!> <div class="container mx-auto max-w-7xl px-4 py-8"><!></div></div>');function Ve(T,Ja){Nt(Ja,!1);const Va=Ft(),ot=()=>Ia(Kt,"$page",Va),Ya=()=>Ia(St,"$unitsData",Va),Na=()=>Ia(Ct,"$unitNamesDetails",Va),ya=ot().url.searchParams.get("name");let N=ea(null),q=ea(null),Za=ea(""),Ga=ea({}),ra=ea([]);Lt(async()=>{var e,i;await Pt(),Ya()&&Na()&&(ta(N,Ya()[ya]),ta(q,((i=(e=r(N))==null?void 0:e.data)==null?void 0:i[ya])||{}),ta(Za,Na().units.names[ya]||ya),ta(Ga,dt(r(q))),ta(ra,lt(r(q).weapondefs||{})))});function lt(e){return Object.entries(e).map(([i,v])=>{const O=v.damage?Object.entries(v.damage).map(([p,m])=>({type:p==="default"?"Base":p,value:Number(m)||0})):[],k=O.length>0?Math.max(...O.map(p=>p.value)):0,sa=k/(v.reloadtime||1);return{name:v.name||i,type:v.weapontype||"Unknown",damage:k,maxDamage:k,dps:sa.toFixed(1),range:v.range||0,reloadTime:v.reloadtime||1}})}function Qa(e){return e!=null&&e.length?{totalDps:e.reduce((i,v)=>i+Number(v.dps),0).toFixed(1),maxRange:Math.max(...e.map(i=>i.range))}:null}function dt(e){const i=["name","faction","type","subtype","path","description","unitname","side","icontype","script","buildpic","category","customparams"],v=["health","maxdamage","damagemodifier","armorType","seismicdistance","seismicsignature","hidedamage","autoheal","idleautoheal","idletime","mass","footprintx","footprintz"],O=["maxvelocity","acceleration","brakerate","turnradius","turnrate","turninplace","turninplaceanglelimit","turninplacespeedlimit","movementclass","moverate1","cruisealt","cruisealtitude","amphibious","floater","upright","canhover","canfly","canmove","canland","airstrafe","airhoverfactor","hoverattack","leavetracks","trackoffset","trackstretch","trackstrength","tracktype","trackwidth","maxacc","maxdec","speed","transportcapacity"],k=["canattack","canattackground","canmanualfire","canpatrol","canrepeat","canresurrect","cancloak","cancapture","weapondefs","weapons","radardistance","radardistancejam","sonardistance","sonarstealth","stealth","cloaked","cloakcost","cloakcostmoving","initcloak","firestate","standingmoveorder","strafetoattack","hightrajectory","kamikaze","kamikazedistance","sightdistance","airsightdistance","onlytargetcategory2","exemptcategory","radarEmitHeight","noautofire","nochase","nochasecategory","turret"],sa=["buildcostenergy","buildcostmetal","buildtime","energycost","energymake","energypershot","energystorage","energyupkeep","extractsmetal","metalcost","metalmake","metalstorage","terraformspeed","workertime","capture","reclaimable","reclaimspeed","repairable","buildoptions"],p={general:{},stats:{},movement:{},combat:{},resources:{},custom:{}};return Object.entries(e).forEach(([m,_])=>{i.includes(m)?p.general[m]=_:v.includes(m)?p.stats[m]=_:O.includes(m)?p.movement[m]=_:k.includes(m)?p.combat[m]=_:sa.includes(m)?p.resources[m]=_:p.custom[m]=_}),p}function Oa(e){return e==null?"â€”":typeof e=="boolean"?e?"Yes":"No":typeof e=="number"?e.toLocaleString():Array.isArray(e)?e.join(", "):e}function Xa(e){if(e<60)return`${e}s`;const i=Math.floor(e/60),v=e%60;return v>0?`${i}m ${v}s`:`${i}m`}function at(e,i){return i==="buildtime"&&typeof e=="number"?Xa(e/100):i.toLowerCase().includes("time")&&typeof e=="number"?Xa(e):Oa(e)}function tt(e){return typeof e=="object"&&e!==null}let y=ea(new Set);function vt(e){r(y).has(e)?r(y).delete(e):r(y).add(e),ta(y,r(y))}function ct(e){const i={general:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",stats:"M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z",movement:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z",combat:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064",resources:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z",custom:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"};return i[e]||i.general}function mt(e){if(!e)return"bottom";const i=e.getBoundingClientRect();return window.innerHeight-i.bottom<400?"top":"bottom"}At();var za=me(),et=t(za);zt(et);var rt=s(et,2),pt=t(rt);{var ut=e=>{var i=ve(),v=t(i),O=t(v),k=t(O),sa=t(k,!0);a(k);var p=s(k,2);qa(p,"href",`${Wt??""}/explore`),a(O);var m=s(O,2),_=t(m),ft=t(_,!0);a(_);var Pa=s(_,2),xt=t(Pa,!0);a(Pa);var st=s(Pa,2);{var _t=w=>{var b=qt(),z=t(b,!0);a(b),d(()=>o(z,r(N).subtype)),n(w,b)};x(st,w=>{r(N).subtype!=="none"&&w(_t)})}var it=s(st,2),bt=t(it);a(it),a(m),a(v);var nt=s(v,2);B(nt,1,()=>Object.entries(r(Ga)),E,(w,b)=>{let z=()=>r(b)[0],Sa=()=>r(b)[1];var I=oe(),ia=t(I),na=t(ia),oa=t(na);d(()=>qa(oa,"d",ct(z()))),a(na);var J=s(na,2),Ca=t(J,!0);a(J),a(ia);var Y=s(ia,2);B(Y,5,()=>Object.entries(Sa()),E,(la,Z)=>{let u=()=>r(Z)[0],P=()=>r(Z)[1];var da=re(),G=t(da),j=t(G),f=t(j,!0);d(()=>o(f,u().replace(/([A-Z])/g," $1"))),a(j);var S=s(j,2);{var M=g=>{var c=It();d(()=>qa(c,"aria-label",r(y).has(u())?"Collapse details":"Expand details"));var D=t(c);const A=Ka(()=>`h-5 w-5 transform transition-transform ${(r(y).has(u())?"rotate-180":"")??""}`);a(c),d(()=>Bt(D,r(A))),Tt("click",c,()=>vt(u())),n(g,c)};x(S,g=>{tt(P())&&g(M)})}a(G);var va=s(G,2);{var H=g=>{var c=te();const D=Ka(()=>`absolute z-10 w-96 ${(mt(r(y).has(u())?document.activeElement:null)==="top"?"bottom-full mb-2":"top-full mt-2")??""}`);var A=t(c),ka=t(A),ca=t(ka);{var wa=V=>{var C=ba(),ma=ha(C);B(ma,1,()=>Object.values(P()),E,(Ta,ja)=>{var h=Jt(),F=t(h),Ha=t(F);a(F),a(h),d(()=>{var Ma,pa,L;return o(Ha,`${r(ja)??""} (${((L=(pa=(Ma=Na())==null?void 0:Ma.units)==null?void 0:pa.names)==null?void 0:L[r(ja)])||"Unknown"})`)}),n(Ta,h)}),n(V,C)},Ea=V=>{var C=ba(),ma=ha(C);{var Ta=h=>{var F=Yt();n(h,F)},ja=h=>{var F=ba(),Ha=ha(F);B(Ha,1,()=>Object.entries(P()),E,(Ma,pa)=>{let L=()=>r(pa)[0],ua=()=>r(pa)[1];var Ra=ae(),wt=t(Ra);{var jt=Q=>{var U=Qt(),W=t(U),Aa=t(W);a(W);var ga=s(W,2),Fa=t(ga);{var Dt=X=>{var fa=ba(),La=ha(fa);B(La,1,()=>Object.entries(ua()),E,(Ua,xa)=>{let Da=()=>r(xa)[0],aa=()=>r(xa)[1];var $=Zt(),K=t($),Wa=t(K);a(K);var _a=s(K,2),$a=t(_a,!0);a(_a),a($),d(()=>{o(Wa,`${(Da()==="default"?"Base":Da())??""}:`),o($a,aa())}),n(Ua,$)}),n(X,fa)},Vt=X=>{var fa=ba(),La=ha(fa);B(La,1,()=>Object.entries(ua()),E,(Ua,xa)=>{let Da=()=>r(xa)[0],aa=()=>r(xa)[1];var $=Gt(),K=t($),Wa=t(K);a(K);var _a=s(K,2),$a=t(_a,!0);d(()=>o($a,typeof aa()=="object"&&aa()!==null?JSON.stringify(aa(),null,2):Oa(aa()))),a(_a),a($),d(()=>o(Wa,`${Da()??""}:`)),n(Ua,$)}),n(X,fa)};x(Fa,X=>{L()==="damage"?X(Dt):X(Vt,!1)})}a(ga),a(U),d(()=>o(Aa,`${L()??""}:`)),n(Q,U)},Mt=Q=>{var U=Xt(),W=t(U),Aa=t(W);a(W);var ga=s(W,2),Fa=t(ga,!0);d(()=>o(Fa,at(ua(),L()))),a(ga),a(U),d(()=>o(Aa,`${L()??""}:`)),n(Q,U)};x(wt,Q=>{typeof ua()=="object"&&ua()!==null?Q(jt):Q(Mt,!1)})}a(Ra),n(Ma,Ra)}),n(h,F)};x(ma,h=>{u()==="buildoptions"?h(Ta):h(ja,!1)},!0)}n(V,C)};x(ca,V=>{u()==="buildoptions"&&Object.values(P()).length>0?V(wa):V(Ea,!1)})}a(ka),a(A),a(c),d(()=>Et(c,r(D))),Ht(3,c,()=>Rt),n(g,c)},R=g=>{var c=ee(),D=t(c,!0);d(()=>o(D,at(P(),u()))),a(c),n(g,c)};x(va,g=>{tt(P())&&r(y).has(u())?g(H):g(R,!1)})}a(da),n(la,da)}),a(Y);var Ba=s(Y,2);{var kt=la=>{var Z=ne(),u=t(Z),P=s(t(u),2);{var da=j=>{var f=se();const S=Ka(()=>Qa(r(ra)));var M=t(f),va=t(M);a(M);var H=s(M,2),R=t(H);a(H),a(f),d(()=>{o(va,`Total DPS: ${r(S).totalDps??""}`),o(R,`Max Range: ${r(S).maxRange??""}`)}),n(j,f)};x(P,j=>{Qa(r(ra))&&j(da)})}a(u);var G=s(u,2);B(G,5,()=>r(ra),E,(j,f)=>{var S=ie(),M=t(S),va=t(M,!0);a(M);var H=s(M,2),R=t(H),g=s(t(R),2),c=t(g,!0);a(g),a(R);var D=s(R,2),A=s(t(D),2),ka=t(A,!0);a(A),a(D);var ca=s(D,2),wa=s(t(ca),2),Ea=t(wa,!0);a(wa),a(ca);var V=s(ca,2),C=s(t(V),2),ma=t(C);a(C),a(V),a(H),a(S),d(()=>{o(va,r(f).type),o(c,r(f).damage),o(ka,r(f).dps),o(Ea,r(f).range),o(ma,`${r(f).reloadTime??""}s`)}),n(j,S)}),a(G),a(Z),n(la,Z)};x(Ba,la=>{z()==="combat"&&r(ra).length>0&&la(kt)})}a(I),d(()=>o(Ca,z())),n(w,I)});var ht=s(nt,2);{var yt=w=>{var b=de(),z=s(t(b),2);B(z,5,()=>Object.entries(r(q).customparams),E,(Sa,I)=>{let ia=()=>r(I)[0],na=()=>r(I)[1];var oa=le(),J=t(oa),Ca=t(J,!0);a(J);var Y=s(J,2),Ba=t(Y,!0);d(()=>o(Ba,Oa(na()))),a(Y),a(oa),d(()=>o(Ca,ia())),n(Sa,oa)}),a(z),a(b),n(w,b)};x(ht,w=>{r(q).customparams&&w(yt)})}a(i),d(()=>{o(sa,r(Za)),o(ft,r(N).faction==="arm"?"Armada":"Cortex"),o(xt,r(N).type),o(bt,`Tech ${r(N).tech_level??""}`)}),n(e,i)},gt=e=>{var i=ce();n(e,i)};x(pt,e=>{r(N)&&r(q)?e(ut):e(gt,!1)})}a(rt),a(za),n(T,za),Ot()}export{Ve as component};
