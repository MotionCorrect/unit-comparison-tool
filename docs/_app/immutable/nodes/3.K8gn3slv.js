import{a as i,t as g,b as me,c as He,n as Ja}from"../chunks/disclose-version.D6IHqBz7.js";import"../chunks/legacy.BC6soP9j.js";import{aD as br,h as Xt,X as Yt,W as Gt,V as Jt,p as xr,l as pt,a as yr,t as p,b as hr,d as T,g as e,m as L,c as s,s as o,r as t,n as wr,a5 as Rt,aE as aa,a6 as ya,a7 as ie}from"../chunks/runtime.B6PTYWss.js";import{s as f}from"../chunks/render.DTXsa5-Z.js";import{i as x}from"../chunks/if.Bxm8qDEX.js";import{e as Q,i as ee}from"../chunks/each.Bw4TUKtu.js";import{N as kr,l as Cr,r as mt,u as Mr,a as jr,s as ta,b as Sr,c as he,h as Ot}from"../chunks/Navbar.D9u0jLq4.js";import{l as _t,e as Ae}from"../chunks/events.CuhszENT.js";import{g as Fa,I as Nr,t as Ur,p as Ft,b as Ht,i as Lt,a as gt,f as $t,c as Ar,R as Tr}from"../chunks/dpsCalculations.BHAYQKma.js";import{i as zr}from"../chunks/props.CjMNljKH.js";import{i as Er}from"../chunks/lifecycle.ZI99Jbm1.js";import{s as Vr,a as qt}from"../chunks/store.CxMiR7dL.js";import{o as Br}from"../chunks/index-client.BbMgc3IQ.js";import{b as Ia}from"../chunks/paths.DeJYX1RY.js";function Wt(d,B,$=B){var u=br();_t(d,"input",E=>{var ae=E?d.defaultValue:d.value;if(ae=ut(d)?ft(ae):ae,$(ae),u&&ae!==(ae=B())){var ne=d.selectionStart,we=d.selectionEnd;d.value=ae??"",we!==null&&(d.selectionStart=ne,d.selectionEnd=Math.min(we,d.value.length))}}),(Xt&&d.defaultValue!==d.value||Yt(B)==null&&d.value)&&$(ut(d)?ft(d.value):d.value),Gt(()=>{var E=B();ut(d)&&E===ft(d.value)||d.type==="date"&&!E&&!d.value||E!==d.value&&(d.value=E??"")})}function Pr(d,B,$=B){_t(d,"change",u=>{var E=u?d.defaultChecked:d.checked;$(E)}),(Xt&&d.defaultChecked!==d.checked||Yt(B)==null)&&$(d.checked),Gt(()=>{var u=B();d.checked=!!u})}function ut(d){var B=d.type;return B==="number"||B==="range"}function ft(d){return d===""?null:+d}function Qt(d,B,$){if(d.multiple)return Or(d,B);for(var u of d.options){var E=Ga(u);if(zr(E,B)){u.selected=!0;return}}(!$||B!==void 0)&&(d.selectedIndex=-1)}function Rr(d,B){Jt(()=>{var $=new MutationObserver(()=>{var u=d.__value;Qt(d,u)});return $.observe(d,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{$.disconnect()}})}function Ta(d,B,$=B){var u=!0;_t(d,"change",E=>{var ae=E?"[selected]":":checked",ne;if(d.multiple)ne=[].map.call(d.querySelectorAll(ae),Ga);else{var we=d.querySelector(ae)??d.querySelector("option:not([disabled])");ne=we&&Ga(we)}$(ne)}),Jt(()=>{var E=B();if(Qt(d,E,u),u&&E===void 0){var ae=d.querySelector(":checked");ae!==null&&(E=Ga(ae),$(E))}d.__value=E,u=!1}),Rr(d)}function Or(d,B){for(var $ of d.options)$.selected=~B.indexOf(Ga($))}function Ga(d){return"__value"in d?d.__value:d.value}var Fr=g("<option> </option>"),Hr=g("<option> </option>"),Lr=g("<option> </option>"),$r=g("<optgroup></optgroup>"),qr=g('<div class="flex items-center gap-3"><select class="rounded-lg bg-gray-900 px-3 py-2 text-gray-200"><option>Select field...</option><!></select> <select class="rounded-lg bg-gray-900 px-3 py-2 text-gray-200"><option>greater than</option><option>less than</option><option>=</option></select> <input type="number" class="rounded-lg bg-gray-900 px-3 py-2 text-gray-200" placeholder="Value"> <button aria-label="Remove filter" class="text-gray-400 hover:text-red-400"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),Wr=g('<div class="space-y-3"></div>'),Xr=g('<label class="flex items-center gap-2 rounded-lg bg-gray-900/50 px-3 py-2"><input type="checkbox" class="rounded border-gray-600 bg-gray-800 text-teal-500 focus:ring-teal-500"> <span class="text-sm text-gray-300"> </span></label>'),Yr=Ja('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 9L4 4m0 0l5 0m-5 0l0 5M9 15l-5 5m0 0l5 0m-5 0l0 -5M15 9l5 -5m0 0l-5 0m5 0l0 5M15 15l5 5m0 0l-5 0m5 0l0 -5"></path>'),Gr=Ja('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-5h-4m4 0v4m0-4l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5h-4m4 0v-4m0 4l-5-5"></path>'),Jr=Ja('<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>'),Qr=g('<th><div class="flex items-center gap-1"> <!></div></th>'),Kr=g('<img class="max-h-full max-w-full object-contain" loading="lazy">'),Zr=g('<span class="text-xs text-gray-500">?</span>'),Ir=Ja('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>'),Dr=Ja('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>'),es=g('<span class="rounded-full bg-pink-500/20 px-2 py-0.5 text-xs text-pink-400"> </span>'),as=g('<span class="rounded-full bg-red-500/20 px-2 py-0.5 text-xs text-red-400"> </span>'),ts=g('<td class="p-3 text-right text-gray-300"><!></td>'),rs=g('<tr class="border-b border-gray-800/50 hover:bg-gray-800/30"><td class="sticky left-0 z-10 bg-gray-900 p-3"><div class="flex min-w-[300px] items-center gap-4"><div class="flex h-10 w-10 flex-shrink-0 items-center justify-center overflow-hidden rounded bg-gray-800/50"><!></div> <div class="flex flex-grow items-center justify-between"><div class="flex items-center gap-2"><button><span><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><!></svg></span> <span class="opacity-70 group-hover:opacity-100"> </span></button> <a class="text-teal-400 hover:underline"> </a></div> <div class="flex h-6 items-center gap-2"><span class="rounded-full bg-teal-500/20 px-2 py-0.5 text-teal-400"> </span> <span class="rounded-full bg-purple-500/20 px-2 py-0.5 text-xs text-purple-400"> </span> <!> <span class="rounded-full bg-blue-500/20 px-2 py-0.5 text-xs text-blue-400"> </span> <!></div></div></div></td><!></tr>'),ss=g('<div class="rounded-lg bg-gray-800/50 p-6"><div class="mb-6"><div class="relative"><input type="text" placeholder="Search units..." class="w-full rounded-lg bg-gray-900 py-2 pl-10 pr-4 text-gray-200 placeholder-gray-500"> <svg class="absolute left-3 top-2.5 h-5 w-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div></div> <div class="mb-6 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-5"><div class="space-y-2"><label for="tech-level" class="text-sm text-gray-400">Tech Level</label> <select id="tech-level" class="w-full rounded-lg bg-gray-900 px-3 py-2 text-gray-200"><option>All Tech Levels</option><option>Tech 1</option><option>Tech 2</option></select></div> <div class="space-y-2"><label for="unit-type" class="text-sm text-gray-400">Unit Type</label> <select id="unit-type" class="w-full rounded-lg bg-gray-900 px-3 py-2 text-gray-200"><option>All Types</option><!></select></div> <div class="space-y-2"><label for="sub-type" class="text-sm text-gray-400">Sub Type</label> <select id="sub-type" class="w-full rounded-lg bg-gray-900 px-3 py-2 text-gray-200"><option>All Sub Types</option><!></select></div> <div class="space-y-2"><label for="faction" class="text-sm text-gray-400">Faction</label> <select id="faction" class="w-full rounded-lg bg-gray-900 px-3 py-2 text-gray-200"><option>All Factions</option><option>Armada</option><option>Cortex</option></select></div></div> <div class="mb-6"><div class="mb-4 flex items-center justify-between"><h3 class="text-sm font-medium text-gray-300">Custom Filters</h3> <button class="flex items-center gap-2 text-sm text-teal-400 hover:text-teal-300"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> Add Filter</button></div> <!></div> <div class="mb-6"><div class="mb-4 flex items-center justify-between"><h3 class="text-sm font-medium text-gray-300">Visible Columns</h3> <button class="flex items-center gap-2 text-sm text-teal-400 hover:text-teal-300"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> Add Column</button></div> <div class="flex flex-wrap gap-2"></div></div> <div><div class="table-controls mb-2 flex justify-end svelte-dsi7k9"><button class="flex items-center gap-2 rounded-lg bg-gray-800/80 px-3 py-1.5 text-sm text-gray-300 transition-colors hover:bg-gray-700 hover:text-white"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><!></svg> </button></div> <div id="browse-table-container"><table class="relative w-full"><thead><tr class="sticky top-0 z-20 border-b border-gray-700 bg-gray-900/95 backdrop-blur-sm"></tr></thead><tbody class="divide-y divide-gray-800/50"></tbody></table></div></div></div>'),ls=g('<button class="text-gray-400 transition-colors hover:text-red-400" aria-label="Remove unit slot"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>'),os=g('<option class="flex items-center gap-2"> </option>'),is=g('<div class="min-w-[250px] max-w-[300px] flex-1 rounded-lg bg-gray-800/50 p-4"><div class="mb-4 flex items-center justify-between"><h3 class="font-medium text-white"></h3> <!></div> <select class="w-full rounded-lg border border-gray-600/50 bg-gray-700/50 px-3 py-2 text-white"><option>Select a unit...</option><!></select></div>'),ns=g('<img class="max-h-full max-w-full object-contain" loading="lazy">'),ds=g('<span class="text-xs text-gray-500">?</span>'),vs=g('<span class="rounded-full bg-pink-500/20 px-2 py-0.5 text-pink-400"> </span>'),cs=g('<span class="rounded-full bg-red-500/20 px-2 py-0.5 text-red-400"> </span>'),ps=g('<div class="flex flex-col items-center gap-3"><div class="flex h-16 w-16 items-center justify-center overflow-hidden rounded bg-gray-700/50"><!></div> <div class="space-y-1"><a class="inline-block font-medium text-white transition-colors hover:text-teal-400"> </a> <div class="flex justify-center gap-2 text-sm"><span class="rounded-full bg-teal-500/20 px-2 py-0.5 text-teal-400"> </span> <span class="rounded-full bg-purple-500/20 px-2 py-0.5 text-purple-400"> </span> <!> <span class="rounded-full bg-blue-500/20 px-2 py-0.5 text-blue-400"> </span> <!></div></div></div>'),ms=g('<span class="text-gray-500">No unit selected</span>'),gs=g("<th><!></th>"),us=g('<div class="flex justify-center gap-2 text-sm"><span class="rounded-full bg-red-500/20 px-2 py-0.5 text-red-400"> </span> <span class="rounded-full bg-blue-500/20 px-2 py-0.5 text-blue-400"> </span></div>'),fs=g('<span class="ml-1 rounded-full bg-yellow-500/20 px-2 py-0.5 text-xs font-medium text-yellow-400">EMP</span>'),_s=g('<span class="ml-1 rounded-full bg-orange-500/20 px-2 py-0.5 text-xs font-medium text-orange-400">Special</span>'),bs=g('<div class="flex justify-between"><span class="text-gray-400"> </span> <span class="font-medium text-yellow-400"> </span></div> <div class="flex justify-between"><span class="text-gray-400">Paralyze DPS</span> <span class="font-medium text-yellow-400"> </span></div>',1),xs=g('<div class="flex justify-between"><span class="text-gray-400">Burst</span> <span class="font-medium text-green-400"> </span></div>'),ys=g('<div class="rounded-lg border border-gray-700/30 bg-gray-900/50 p-3"><div class="mb-2 font-medium text-gray-300"> <!> <!></div> <div class="grid grid-cols-2 gap-2 text-sm"><div class="flex justify-between"><span class="text-gray-400">Damage</span> <span class="font-medium text-red-400"> </span></div> <div class="flex justify-between"><span class="text-gray-400">DPS</span> <span class="font-medium text-orange-400"><!></span></div> <!> <!> <div class="flex justify-between"><span class="text-gray-400">Range</span> <span class="font-medium text-blue-400"> </span></div> <div class="flex justify-between"><span class="text-gray-400">Reload</span> <span class="font-medium text-purple-400"> </span></div></div></div>'),hs=g('<!> <div class="mt-4 space-y-3"></div>',1),ws=g('<div class="flex items-center justify-center rounded-lg border border-gray-700/30 bg-gray-900/50 p-4"><span class="text-sm text-gray-500">No weapons</span></div>'),ks=g('<td class="p-4 align-top"><div class="top-0 rounded-lg bg-gray-800/50 p-4"><!></div></td>'),Cs=g('<tr><td class="left-0 bg-gray-900/95 p-4"></td><!></tr>'),Ms=g('<span class="text-gray-500">—</span>'),js=g('<div class="space-y-1 overflow-y-auto rounded-md bg-gray-850/50 p-2" style="max-height: 32rem;"><!></div> <button class="mt-2 text-xs text-teal-400 hover:text-teal-300">Collapse</button>',1),Ss=g('<button class="text-sm text-teal-400 hover:text-teal-300"><!></button>'),Ns=g("<td><!></td>"),Us=g('<tr class="transition-colors hover:bg-gray-800/30"><td class="sticky left-0 z-10 p-4 pl-8 text-gray-400" style="background: linear-gradient(to right, rgb(17 24 39 / 0.95), rgb(17 24 39 / 0.95)) padding-box, rgb(55 65 81 / 0.5) border-box; border-right: 2px solid transparent; backdrop-filter: blur(4px);"> </td><!></tr>'),As=g('<tr><td class="sticky left-0 p-4 font-medium text-teal-400"><div class="flex items-center gap-2"><div></div> <div class="relative flex items-center gap-2"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></path></svg> <span class="capitalize"> </span></div></div></td></tr> <!> <!>',1),Ts=g('<div class="relative overflow-auto" style="max-height: calc(100vh - 250px);" role="region"><table class="relative w-full border-collapse"><thead><tr class="sticky top-0 z-20"><th class="sticky left-0 z-30 w-1/4 min-w-[200px] rounded-tl-lg bg-gray-800/95 p-4 text-left backdrop-blur-sm">Property</th><!></tr></thead><tbody class="divide-y divide-gray-800/50"></tbody></table></div>'),zs=g('<div class="py-12 text-center text-gray-400">Select units to compare their properties</div>'),Es=g('<div class="rounded-lg bg-gray-900 shadow-xl"><header class="mb-8 text-center"><h1 class="mb-4 bg-gradient-to-r from-teal-400 to-blue-500 bg-clip-text text-4xl font-bold text-transparent">Unit Comparison</h1> <p class="mx-auto max-w-2xl text-gray-400">Compare multiple units side by side. Add or remove units using the controls below.</p></header> <div class="mb-8"><div class="flex flex-wrap items-start gap-4"><!> <button class="flex items-center gap-2 rounded-lg bg-teal-600/20 px-4 py-2 text-teal-400 transition-colors hover:bg-teal-600/30"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> Add Unit</button></div></div> <!></div>'),Vs=g("<div> </div>"),Bs=g('<div class="min-h-screen bg-gray-900 text-gray-100"><!> <div class="container mx-auto max-w-7xl px-4 py-8"><div class="mb-12 grid gap-8 md:grid-cols-2"><div><div class="mb-4 flex items-center gap-3"><svg class="h-6 w-6 text-teal-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> <h2 class="text-xl font-semibold text-teal-300">Browse Mode</h2></div> <ul class="ml-4 space-y-2 text-gray-300"><li>• Filter units by type, faction, and tech level</li> <li>• Add custom filters for specific unit properties</li> <li>• Sort columns by clicking column headers</li> <li>• Customize visible columns using the column manager</li> <li>• Click unit names to view detailed information</li></ul></div> <div><div class="mb-4 flex items-center gap-3"><svg class="h-6 w-6 text-teal-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg> <h2 class="text-xl font-semibold text-teal-300">Compare Mode</h2></div> <ul class="ml-4 space-y-2 text-gray-300"><li>• Select multiple units to compare side by side</li> <li>• Add or remove unit slots as needed</li> <li>• Properties are grouped by category</li> <li>• Different values are highlighted for easy comparison</li> <li>• Expand object properties to see detailed information</li></ul></div></div> <div class="mb-8 flex justify-center gap-4"><button>Browse Units</button> <button>Compare Units</button></div> <!></div> <div class="fixed bottom-4 right-4 z-50 flex flex-col gap-2"></div> <!></div>');function Ks(d,B){xr(B,!1);const $=Vr(),u=()=>qt(Mr,"$unitsData",$),E=()=>qt(jr,"$unitNamesDetails",$),ae=L(),ne=L();let we=L("browse"),Le=L([{id:"unit",name:"Unit",visible:!0},{id:"type",name:"Type",visible:!0},{id:"subtype",name:"Subtype",visible:!1},{id:"faction",name:"Faction",visible:!1},{id:"tech",name:"Tech Level",visible:!1},{id:"health",name:"Health",visible:!0},{id:"sightDistance",name:"Sight Range",visible:!0},{id:"maxRange",name:"Weapon Range",visible:!0},{id:"dps",name:"DPS",visible:!0},{id:"armor_type",name:"Armor",visible:!0}]),Qa=L(""),Ha=L("all"),ja=L("all"),La=L("all"),$a=L("all"),Te=L([]),qa=L("name"),Wa=L("asc"),k=L(["",""]),Da=L([]),za=L(new Set);const bt=["name","faction","type","subtype","path","description","unitname","side","icontype","script","buildpic","category","customparams"],et=["health","maxdamage","damagemodifier","armorType","seismicdistance","seismicsignature","hidedamage","autoheal","idleautoheal","idletime","mass","footprintx","footprintz"],at=["maxvelocity","acceleration","brakerate","turnradius","turnrate","turninplace","turninplaceanglelimit","turninplacespeedlimit","movementclass","moverate1","cruisealt","cruisealtitude","amphibious","floater","upright","canhover","canfly","canmove","canland","airstrafe","airhoverfactor","hoverattack","leavetracks","trackoffset","trackstretch","trackstrength","tracktype","trackwidth","maxacc","maxdec","speed","transportcapacity"],tt=["canattack","canattackground","canmanualfire","canpatrol","canrepeat","canresurrect","cancloak","cancapture","weapondefs","weapons","radardistance","radardistancejam","sonardistance","sonarstealth","stealth","cloaked","cloakcost","cloakcostmoving","initcloak","firestate","standingmoveorder","strafetoattack","hightrajectory","kamikaze","kamikazedistance","sightdistance","airsightdistance","onlytargetcategory2","exemptcategory","radarEmitHeight","noautofire","nochase","nochasecategory","turret"],rt=["buildcostenergy","buildcostmetal","buildtime","energycost","energymake","energypershot","energystorage","energyupkeep","extractsmetal","metalcost","metalmake","metalstorage","terraformspeed","workertime","capture","reclaimable","reclaimspeed","repairable","buildoptions"],st=[{category:"Stats",fields:[...et.map(a=>({id:a,name:Fa(a),type:"number"}))]},{category:"Combat",fields:[...tt.map(a=>({id:a,name:Fa(a),type:"number"}))]},{category:"Movement",fields:[...at.map(a=>({id:a,name:Fa(a),type:"number"}))]},{category:"Resources",fields:[...rt.map(a=>({id:a,name:Fa(a),type:"number"}))]}];function Kt(){T(k,[...e(k),""])}function Zt(a){T(k,e(k).filter((r,n)=>n!==a))}function It(a){const r=new Set;a.forEach(v=>{var j,U;if(!v)return;const C=(j=u())==null?void 0:j[v];(U=C==null?void 0:C.data)!=null&&U[v]&&Object.keys(C.data[v]).forEach(H=>r.add(H))});const n=Array.from(r),c=v=>e(ne).reduce((C,j)=>{var U;return C+(((U=j==null?void 0:j.data)==null?void 0:U[v])!==void 0?1:0)},0),h=v=>[...v].sort((C,j)=>c(j)-c(C));return{general:h(n.filter(v=>bt.includes(v))),stats:h(n.filter(v=>et.includes(v))),movement:h(n.filter(v=>at.includes(v))),combat:h(n.filter(v=>tt.includes(v))),resources:h(n.filter(v=>rt.includes(v))),custom:n.filter(v=>!bt.includes(v)&&!et.includes(v)&&!at.includes(v)&&!tt.includes(v)&&!rt.includes(v))}}function xt(a){e(za).has(a)?e(za).delete(a):e(za).add(a),T(za,e(za))}Br(async()=>{await Cr(),u()&&E()&&T(Da,Object.entries(u()).map(([a,r])=>({id:a,name:E().units.names[a]||a,faction:r.faction,type:r.type,subtype:r.subtype,tech:r.tech_level})).filter(a=>a.type&&a.type!=="other").sort((a,r)=>a.name.localeCompare(r.name)))});let Sa=L(!1);function Dt(){T(Sa,!e(Sa))}function yt(a){const r={general:"bg-blue-900/20 border-l-4 border-blue-500/50",stats:"bg-green-900/20 border-l-4 border-green-500/50",movement:"bg-yellow-900/20 border-l-4 border-yellow-500/50",combat:"bg-red-900/20 border-l-4 border-red-500/50",resources:"bg-purple-900/20 border-l-4 border-purple-500/50",custom:"bg-gray-800/30 border-l-4 border-gray-500/50"};return r[a]||r.custom}function ht(a){const r={general:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0114 0z",stats:"M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z",movement:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z",combat:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064",resources:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z",custom:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"};return r[a]||r.custom}function er(){if(!u())return[];let a=Object.entries(u()).filter(([r,n])=>n.type&&n.type!=="other").map(([r,n])=>{var C;const c=((C=n.data)==null?void 0:C[r])||{},h=Ft(c==null?void 0:c.weapondefs),v=Ht(h,c,r);return{id:r,name:E().units.names[r]||r,type:n.type,subtype:n.subtype,tech:n.tech_level,faction:n.faction,health:(c==null?void 0:c.maxdamage)||0,sightDistance:(c==null?void 0:c.sightdistance)||0,maxRange:Number((v==null?void 0:v.maxRange)||0),dps:Number((v==null?void 0:v.totalDps)||0),isSuicideUnit:Lt(c),isMineUnit:gt(c),armor:(c==null?void 0:c.armor)||0,data:c,...Object.fromEntries(Object.entries(c).map(([j,U])=>[j,typeof U=="object"?JSON.stringify(U):U]))}});return e(Qa)&&(a=a.filter(r=>r.name.toLowerCase().includes(e(Qa).toLowerCase()))),e(Ha)!=="all"&&(a=a.filter(r=>r.tech===parseInt(e(Ha)))),e(ja)!=="all"&&(a=a.filter(r=>r.type===e(ja))),e(La)!=="all"&&(a=a.filter(r=>r.subtype===e(La))),e($a)!=="all"&&(a=a.filter(r=>r.faction===e($a))),e(Te).forEach(r=>{r.field&&r.value!==""&&(a=a.filter(n=>{const c=parseFloat(n[r.field]),h=parseFloat(r.value);return isNaN(c)||isNaN(h)?!1:r.operator===">"?c>h:r.operator==="<"?c<h:r.operator==="="?c===h:!1}))}),a.sort((r,n)=>{const c=r[e(qa)],h=n[e(qa)];let v=0;const C=Number(c),j=Number(h);return!isNaN(C)&&!isNaN(j)?v=C-j:typeof c=="string"&&typeof h=="string"?v=c.localeCompare(h):v=String(c).localeCompare(String(h)),e(Wa)==="asc"?v:-v})}function ar(){return u()?[...new Set(Object.values(u()).map(a=>a.type))].filter(Boolean).sort():[]}function tr(){if(!u())return[];const r=Object.values(u()).filter(n=>e(ja)==="all"||n.type===e(ja)).map(n=>n.subtype);return[...new Set(r)].filter(Boolean).sort()}function rr(){T(Te,[...e(Te),{field:"",operator:">",value:""}])}function sr(a){T(Te,e(Te).filter((r,n)=>n!==a))}function lr(a){const r=a.id==="unit"?"name":a.id;console.log("Sorting by:",a,r),e(qa)===r?T(Wa,e(Wa)==="asc"?"desc":"asc"):(T(qa,r),T(Wa,"asc"))}function or(){const a=document.createElement("dialog");a.className="bg-gray-900 rounded-lg p-6 backdrop:bg-black/50 max-w-7xl";const r=document.createElement("div");r.className="mb-4 border-b border-gray-700 pb-3",r.innerHTML=`
			<h2 class="text-xl font-semibold text-white">Add Columns to Table</h2>
			<p class="text-sm text-gray-400 mt-1">Select columns to add to your comparison view</p>
		`;const n=document.createElement("div");n.className="max-h-[60vh] overflow-auto";const c=document.createElement("div");c.className="grid grid-cols-4 gap-6",n.appendChild(c),st.forEach(v=>{const C=v.fields.filter(j=>!e(Le).some(U=>U.id===j.id));if(C.length){const j=document.createElement("div");j.className="mb-4",j.innerHTML=`
					<h3 class="text-white font-medium mb-2 flex items-center gap-2">
						<svg class="h-5 w-5 text-teal-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="${ht(v.category.toLowerCase())}"></path>
						</svg>
						${v.category}
					</h3>
					<div class="space-y-1 border rounded-lg border-gray-700/50 bg-gray-800/30 p-2">
						${C.map(U=>`
							<label class="flex items-center gap-2 p-2 hover:bg-gray-800 rounded cursor-pointer">
								<input type="checkbox" value="${U.id}" data-name="${U.name}" class="rounded border-gray-600">
								<span class="text-gray-200">${U.name}</span>
							</label>
						`).join("")}
					</div>
				`,c.appendChild(j)}});const h=document.createElement("div");h.className="mt-6 flex justify-end gap-3 border-t border-gray-700 pt-3",h.innerHTML=`
			<button class="px-4 py-2 text-gray-400 hover:text-gray-300 rounded" id="cancel">Cancel</button>
			<button class="px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-500 transition-colors" id="add">Add Selected Columns</button>
		`,a.appendChild(r),a.appendChild(n),a.appendChild(h),document.body.appendChild(a),a.querySelector("#cancel").onclick=()=>a.close(),a.querySelector("#add").onclick=()=>{const v=Array.from(a.querySelectorAll("input:checked")).map(C=>({id:C.value,name:C.dataset.name,visible:!0}));T(Le,[...e(Le),...v]),a.close()},a.showModal()}function ir(a){const r=a.originalTarget;if(r){const n=r.getBoundingClientRect(),c=window.scrollY+n.top-100;window.scrollTo({top:c,behavior:"smooth"})}}let Xa=L([]);function wt(a,r="success"){T(Xa,[...e(Xa),{message:a,type:r,id:Date.now()}]),setTimeout(()=>{T(Xa,e(Xa).slice(1))},3e3)}function nr(a,r){var c,h,v,C,j,U,H,de,ge,ue,ke,ma,$e,ze,A,te,ve,q,P,re,W,K,fe,ra,sa,ga,qe,We,Ee,Xe,Ye,Ce,Ge,Me,ha,ua,Ve,O,_e,je,ce,M,S,_,l,m,w,R,G;return[a==null?void 0:a.buildcostmetal,(c=a==null?void 0:a[r])==null?void 0:c.buildcostmetal,(C=(v=(h=a==null?void 0:a.data)==null?void 0:h[r])==null?void 0:v[r])==null?void 0:C.buildcostmetal,(U=(j=a==null?void 0:a.data)==null?void 0:j[r])==null?void 0:U.buildcostmetal,(ue=(ge=(de=(H=u())==null?void 0:H[r])==null?void 0:de.data)==null?void 0:ge[r])==null?void 0:ue.buildcostmetal,(A=(ze=($e=(ma=(ke=u())==null?void 0:ke[r])==null?void 0:ma.data)==null?void 0:$e[r])==null?void 0:ze[r])==null?void 0:A.buildcostmetal,(te=a==null?void 0:a.cost)==null?void 0:te.metal,(q=(ve=a==null?void 0:a[r])==null?void 0:ve.cost)==null?void 0:q.metal,(W=(re=(P=a==null?void 0:a.data)==null?void 0:P[r])==null?void 0:re.cost)==null?void 0:W.metal,(sa=(ra=(fe=(K=a==null?void 0:a.data)==null?void 0:K[r])==null?void 0:fe[r])==null?void 0:ra.cost)==null?void 0:sa.metal,(Xe=(Ee=(We=(qe=(ga=u())==null?void 0:ga[r])==null?void 0:qe.data)==null?void 0:We[r])==null?void 0:Ee.cost)==null?void 0:Xe.metal,(ua=(ha=(Me=(Ge=(Ce=(Ye=u())==null?void 0:Ye[r])==null?void 0:Ce.data)==null?void 0:Ge[r])==null?void 0:Me[r])==null?void 0:ha.cost)==null?void 0:ua.metal,a==null?void 0:a.metalcost,(Ve=a==null?void 0:a[r])==null?void 0:Ve.metalcost,(ce=(je=(_e=(O=u())==null?void 0:O[r])==null?void 0:_e.data)==null?void 0:je[r])==null?void 0:ce.metalcost,(M=a==null?void 0:a.customparams)==null?void 0:M.buildcostmetal,(_=(S=a==null?void 0:a[r])==null?void 0:S.customparams)==null?void 0:_.buildcostmetal,(G=(R=(w=(m=(l=u())==null?void 0:l[r])==null?void 0:m.data)==null?void 0:w[r])==null?void 0:R.customparams)==null?void 0:G.buildcostmetal].find(X=>X!=null)||0}let dr=L(!1),vr="",cr=L(0),pr=L(0);function kt(a){if(!a||!a.buildpic)return"";const r=a.buildpic,n=r.split("/"),c=n.pop(),h=n.pop(),v=c.split(".")[0].toLowerCase();return h?`${Ia}/unitpics_webp/${h}/${v}.webp`:(console.warn(`Buildpic might be missing category: ${r}. Using fallback path.`),`${Ia}/unitpics_webp/${v}.webp`)}pt(()=>e(k),()=>{T(ae,It(e(k)))}),pt(()=>(e(k),u(),E(),gt),()=>{T(ne,e(k).map(a=>{var v,C,j,U,H;if(!a)return null;const r=(v=u())==null?void 0:v[a],n=((C=r==null?void 0:r.data)==null?void 0:C[a])||{},c=Ft(n==null?void 0:n.weapondefs),h=Ht(c,n,a);return{id:a,name:((H=(U=(j=E())==null?void 0:j.units)==null?void 0:U.names)==null?void 0:H[a])||a,data:n,faction:r==null?void 0:r.faction,type:r==null?void 0:r.type,subtype:r==null?void 0:r.subtype,weapons:c,combatStats:h,tech:r==null?void 0:r.tech_level,isSuicideUnit:Lt(n),isMineUnit:gt(n)}}))}),pt(()=>(e(Te),e(Le)),()=>{e(Te).forEach(a=>{if(a.field&&!e(Le).some(r=>r.id===a.field)){const r=st.flatMap(n=>n.fields).find(n=>n.id===a.field);r&&T(Le,[...e(Le),{id:r.id,name:r.name,visible:!0}])}})}),yr(),Er();var lt=Bs(),Ct=s(lt);kr(Ct);var ot=o(Ct,2),it=s(ot),Mt=s(it),mr=o(Mt,2);t(it);var nt=o(it,2),dt=s(nt),jt=o(dt,2);t(nt);var gr=o(nt,2);{var ur=a=>{var r=ss(),n=s(r),c=s(n),h=s(c);mt(h),wr(2),t(c),t(n);var v=o(n,2),C=s(v),j=o(s(C),2);p(()=>{e(Ha),aa(()=>{})});var U=s(j);U.value=(U.__value="all")==null?"":"all";var H=o(U);H.value=(H.__value="1")==null?"":"1";var de=o(H);de.value=(de.__value="2")==null?"":"2",t(j),t(C);var ge=o(C,2),ue=o(s(ge),2);p(()=>{e(ja),aa(()=>{})});var ke=s(ue);ke.value=(ke.__value="all")==null?"":"all";var ma=o(ke);Q(ma,1,ar,ee,(_,l)=>{var m=Fr(),w={},R=s(m,!0);t(m),p(()=>{w!==(w=e(l))&&(m.value=(m.__value=e(l))==null?"":e(l)),f(R,e(l))}),i(_,m)}),t(ue),t(ge);var $e=o(ge,2),ze=o(s($e),2);p(()=>{e(La),aa(()=>{})});var A=s(ze);A.value=(A.__value="all")==null?"":"all";var te=o(A);Q(te,1,tr,ee,(_,l)=>{var m=Hr(),w={},R=s(m,!0);t(m),p(()=>{w!==(w=e(l))&&(m.value=(m.__value=e(l))==null?"":e(l)),f(R,e(l))}),i(_,m)}),t(ze),t($e);var ve=o($e,2),q=o(s(ve),2);p(()=>{e($a),aa(()=>{})});var P=s(q);P.value=(P.__value="all")==null?"":"all";var re=o(P);re.value=(re.__value="arm")==null?"":"arm";var W=o(re);W.value=(W.__value="cor")==null?"":"cor",t(q),t(ve),t(v);var K=o(v,2),fe=s(K),ra=o(s(fe),2);t(fe);var sa=o(fe,2);{var ga=_=>{var l=Wr();Q(l,5,()=>e(Te),ee,(m,w,R)=>{var G=qr(),X=s(G);p(()=>{e(w),aa(()=>{})});var z=s(X);z.value=((z.__value="")==null,"");var Y=o(z);Q(Y,1,()=>st,ee,(Z,Se)=>{var J=$r();Q(J,5,()=>e(Se).fields,ee,(Ne,xe)=>{var ye=Lr(),Je={},le=s(ye,!0);t(ye),p(()=>{Je!==(Je=e(xe).id)&&(ye.value=(ye.__value=e(xe).id)==null?"":e(xe).id),f(le,e(xe).name)}),i(Ne,ye)}),t(J),p(()=>ta(J,"label",e(Se).category)),i(Z,J)}),t(X);var be=o(X,2);p(()=>{e(w),aa(()=>{})});var la=s(be);la.value=(la.__value=">")==null?"":">";var Be=o(la);Be.value=(Be.__value="<")==null?"":"<";var F=o(Be);F.value=(F.__value="=")==null?"":"=",t(be);var N=o(be,2);mt(N);var se=o(N,2);t(G),Ta(X,()=>e(w).field,Z=>(e(w).field=Z,aa(()=>e(Te)))),Ta(be,()=>e(w).operator,Z=>(e(w).operator=Z,aa(()=>e(Te)))),Wt(N,()=>e(w).value,Z=>(e(w).value=Z,aa(()=>e(Te)))),Ae("click",se,()=>sr(R)),i(m,G)}),t(l),i(_,l)};x(sa,_=>{e(Te).length>0&&_(ga)})}t(K);var qe=o(K,2),We=s(qe),Ee=o(s(We),2);t(We);var Xe=o(We,2);Q(Xe,5,()=>e(Le),ee,(_,l,m)=>{var w=Xr(),R=s(w);mt(R);var G=o(R,2),X=s(G,!0);t(G),t(w),p(()=>f(X,e(l).name)),Pr(R,()=>e(l).visible,z=>(e(l).visible=z,aa(()=>e(Le)))),i(_,w)}),t(Xe),t(qe);var Ye=o(qe,2),Ce=s(Ye),Ge=s(Ce),Me=s(Ge),ha=s(Me);{var ua=_=>{var l=Yr();i(_,l)},Ve=_=>{var l=Gr();i(_,l)};x(ha,_=>{e(Sa)?_(ua):_(Ve,!1)})}t(Me);var O=o(Me);t(Ge),t(Ce);var _e=o(Ce,2),je=s(_e),ce=s(je),M=s(ce);Q(M,5,()=>e(Le).filter(_=>_.visible),ee,(_,l)=>{var m=Qr(),w=s(m),R=s(w),G=o(R);{var X=z=>{var Y=Jr();p(()=>Sr(Y,`h-4 w-4 transition-transform ${(e(Wa)==="desc"?"rotate-180":"")??""}`)),i(z,Y)};x(G,z=>{e(qa)===(e(l).id==="unit"?"name":e(l).id)&&z(X)})}t(w),t(m),p(()=>{he(m,`cursor-pointer whitespace-nowrap p-3 text-left text-gray-400 hover:text-white ${(e(l).id==="unit"?"sticky left-0 z-30 min-w-[250px] bg-gray-900/95 backdrop-blur-sm":"")??""}`),f(R,`${e(l).name??""} `)}),Ae("click",m,()=>lr(e(l))),i(_,m)}),t(M),t(ce);var S=o(ce);Q(S,5,er,ee,(_,l)=>{var m=rs();const w=ya(()=>kt(e(l).data));var R=s(m),G=s(R),X=s(G),z=s(X);{var Y=y=>{var b=Kr();p(()=>{ta(b,"src",e(w)),ta(b,"alt",e(l).name)}),Ot(b),i(y,b)},be=y=>{var b=Zr();i(y,b)};x(z,y=>{e(w)?y(Y):y(be,!1)})}t(X);var la=o(X,2),Be=s(la),F=s(Be);const N=ya(()=>`rounded-lg ${(e(k).includes(e(l).id)?"bg-red-600/20 hover:bg-red-600/30":"bg-teal-600/20 hover:bg-teal-600/30")??""} group flex items-center gap-1.5 px-2 py-1 text-xs`);p(()=>ta(F,"aria-label",e(k).includes(e(l).id)?"Remove from comparison":"Add to comparison"));var se=s(F);const Z=ya(()=>e(k).includes(e(l).id)?"text-red-400":"text-teal-400");var Se=s(se),J=s(Se);{var Ne=y=>{var b=Ir();i(y,b)},xe=y=>{var b=Dr();i(y,b)};x(J,y=>{e(k).includes(e(l).id)?y(Ne):y(xe,!1)})}t(Se),t(se);var ye=o(se,2),Je=s(ye,!0);p(()=>f(Je,e(k).includes(e(l).id)?"Remove":"Compare")),t(ye),t(F);var le=o(F,2),oa=s(le,!0);t(le),t(Be);var Ea=o(Be,2),fa=s(Ea),Va=s(fa,!0);t(fa);var Pe=o(fa,2),_a=s(Pe,!0);t(Pe);var Ba=o(Pe,2);{var Pa=y=>{var b=es(),oe=s(b,!0);t(b),p(()=>f(oe,e(l).subtype)),i(y,b)};x(Ba,y=>{e(l).subtype&&e(l).subtype!=="none"&&y(Pa)})}var Na=o(Ba,2),Qe=s(Na);t(Na);var ba=o(Na,2);{var Ua=y=>{var b=as(),oe=s(b,!0);t(b),p(()=>f(oe,e(l).isMineUnit?"Mine":"Suicide")),i(y,b)};x(ba,y=>{e(l).isSuicideUnit&&y(Ua)})}t(Ea),t(la),t(G),t(R);var Ra=o(R);Q(Ra,1,()=>e(Le).filter(y=>y.visible&&y.id!=="unit"),ee,(y,b)=>{var oe=ts(),ct=s(oe);{var V=pe=>{var Ue=me();const Aa=ya(()=>{var D,Ke,Re,Ze,Oa,Ka,Za,xa,Ie,ia,na,da,Oe,De,va,ca,pa,Fe,ea,wa,ka,Ca,Ma,Ya,St,Nt,Ut,At,Tt,zt,Et,Vt,Bt,Pt;return[(Ze=(Re=(Ke=(D=u())==null?void 0:D[e(l).id])==null?void 0:Ke.data)==null?void 0:Re[e(l).id])==null?void 0:Ze.buildcostmetal,(Ie=(xa=(Za=(Ka=(Oa=u())==null?void 0:Oa[e(l).id])==null?void 0:Ka.data)==null?void 0:Za[e(l).id])==null?void 0:xa[e(l).id])==null?void 0:Ie.buildcostmetal,(na=(ia=u())==null?void 0:ia[e(l).id])==null?void 0:na.buildcostmetal,(ca=(va=(De=(Oe=(da=u())==null?void 0:da[e(l).id])==null?void 0:Oe.data)==null?void 0:De[e(l).id])==null?void 0:va.cost)==null?void 0:ca.metal,(Ca=(ka=(wa=(ea=(Fe=(pa=u())==null?void 0:pa[e(l).id])==null?void 0:Fe.data)==null?void 0:ea[e(l).id])==null?void 0:wa[e(l).id])==null?void 0:ka.cost)==null?void 0:Ca.metal,(Nt=(St=(Ya=(Ma=u())==null?void 0:Ma[e(l).id])==null?void 0:Ya.data)==null?void 0:St[e(l).id])==null?void 0:Nt.metalcost,(Et=(zt=(Tt=(At=(Ut=u())==null?void 0:Ut[e(l).id])==null?void 0:At.data)==null?void 0:Tt[e(l).id])==null?void 0:zt.customparams)==null?void 0:Et.buildcostmetal,(Vt=e(l).data)==null?void 0:Vt.buildcostmetal,(Pt=(Bt=e(l).data)==null?void 0:Bt[e(l).id])==null?void 0:Pt.buildcostmetal]});p(()=>f(Ue,e(Aa).find(D=>D!=null)||nr(e(l).data,e(l).id)||0)),i(pe,Ue)},I=pe=>{var Ue=He(),Aa=ie(Ue);{var D=Re=>{var Ze=He(),Oa=ie(Ze);{var Ka=xa=>{var Ie=me();p(()=>{var ia,na,da,Oe;return f(Ie,(Oe=(da=(na=(ia=u())==null?void 0:ia[e(l).id])==null?void 0:na.data)==null?void 0:da[e(l).id])==null?void 0:Oe[e(b).id])}),i(xa,Ie)},Za=xa=>{var Ie=He(),ia=ie(Ie);{var na=Oe=>{var De=me();p(()=>{var va,ca,pa,Fe;return f(De,(Fe=(pa=(ca=(va=u())==null?void 0:va[e(l).id])==null?void 0:ca.data)==null?void 0:pa[e(l).id])==null?void 0:Fe.maxdamage)}),i(Oe,De)},da=Oe=>{var De=He(),va=ie(De);{var ca=Fe=>{var ea=me();p(()=>{var wa,ka,Ca,Ma,Ya;return f(ea,(Ya=(Ma=(Ca=(ka=(wa=u())==null?void 0:wa[e(l).id])==null?void 0:ka.data)==null?void 0:Ca[e(l).id])==null?void 0:Ma[e(l).id])==null?void 0:Ya.maxdamage)}),i(Fe,ea)},pa=Fe=>{var ea=me();ea.nodeValue="0",i(Fe,ea)};x(va,Fe=>{var ea,wa,ka,Ca,Ma;((Ma=(Ca=(ka=(wa=(ea=u())==null?void 0:ea[e(l).id])==null?void 0:wa.data)==null?void 0:ka[e(l).id])==null?void 0:Ca[e(l).id])==null?void 0:Ma.maxdamage)!==void 0?Fe(ca):Fe(pa,!1)},!0)}i(Oe,De)};x(ia,Oe=>{var De,va,ca,pa;((pa=(ca=(va=(De=u())==null?void 0:De[e(l).id])==null?void 0:va.data)==null?void 0:ca[e(l).id])==null?void 0:pa.maxdamage)!==void 0?Oe(na):Oe(da,!1)},!0)}i(xa,Ie)};x(Oa,xa=>{var Ie,ia,na,da;((da=(na=(ia=(Ie=u())==null?void 0:Ie[e(l).id])==null?void 0:ia.data)==null?void 0:na[e(l).id])==null?void 0:da[e(b).id])!==void 0?xa(Ka):xa(Za,!1)})}i(Re,Ze)},Ke=Re=>{var Ze=me();p(()=>f(Ze,$t(e(l)[e(b).id],e(b).id))),i(Re,Ze)};x(Aa,Re=>{e(b).id==="maxdamage"||e(b).id==="health"?Re(D):Re(Ke,!1)},!0)}i(pe,Ue)};x(ct,pe=>{e(b).id==="buildcostmetal"?pe(V):pe(I,!1)})}t(oe),i(y,oe)}),t(m),p(()=>{he(F,e(N)),he(se,e(Z)),ta(le,"href",`${Ia??""}/unit?name=${e(l).id??""}`),f(oa,e(l).name),f(Va,e(l).faction==="arm"?"ARM":"COR"),f(_a,e(l).type),f(Qe,`T${e(l).tech??""}`)}),Ae("click",F,()=>{if(e(k).includes(e(l).id)){for(T(k,e(k).filter(y=>y&&y!==e(l).id).concat(e(k).length<2?[""]:[]));e(k).length<2;)T(k,[...e(k),""]);wt(`Removed ${e(l).name} from comparison`)}else{const y=e(k).findIndex(b=>!b);y>=0?(Rt(k,e(k)[y]=e(l).id),T(k,e(k))):T(k,[...e(k),e(l).id]),wt(`Added ${e(l).name} to comparison`)}}),i(_,m)}),t(S),t(je),t(_e),t(Ye),t(r),p(()=>{he(Ye,`relative ${(e(Sa)?"fullscreen-container":"")??""} svelte-dsi7k9`),ta(Ge,"aria-label",e(Sa)?"Exit fullscreen":"Enter fullscreen"),f(O,` ${(e(Sa)?"Exit Fullscreen":"Fullscreen")??""}`),he(_e,`overflow-x-auto ${(e(Sa)?"fullscreen-table":"max-h-[70vh]")??""} svelte-dsi7k9`)}),Wt(h,()=>e(Qa),_=>T(Qa,_)),Ta(j,()=>e(Ha),_=>T(Ha,_)),Ta(ue,()=>e(ja),_=>T(ja,_)),Ta(ze,()=>e(La),_=>T(La,_)),Ta(q,()=>e($a),_=>T($a,_)),Ae("click",ra,rr),Ae("click",Ee,or),Ae("click",Ge,Dt),i(a,r)},fr=a=>{var r=Es(),n=o(s(r),2),c=s(n),h=s(c);Q(h,1,()=>e(k),ee,(H,de,ge)=>{var ue=is(),ke=s(ue),ma=s(ke);ma.textContent=`Unit ${ge+1}`;var $e=o(ma,2);{var ze=q=>{var P=ls();Ae("click",P,()=>Zt(ge)),i(q,P)};x($e,q=>{e(k).length>2&&q(ze)})}t(ke);var A=o(ke,2);p(()=>{e(k),aa(()=>{e(Da)})});var te=s(A);te.value=((te.__value="")==null,"");var ve=o(te);Q(ve,1,()=>e(Da),ee,(q,P)=>{var re=os(),W={},K=s(re);t(re),p(()=>{W!==(W=e(P).id)&&(re.value=(re.__value=e(P).id)==null?"":e(P).id),f(K,`${e(P).name??""}
											[${(e(P).faction==="arm"?"ARM":"COR")??""}] [${e(P).type??""}
											${(e(P).subtype!=="none"?`/${e(P).subtype}`:"")??""}] [T${e(P).tech??""}]`)}),i(q,re)}),t(A),t(ue),Ta(A,()=>e(k)[ge],q=>Rt(k,e(k)[ge]=q)),i(H,ue)});var v=o(h,2);t(c),t(n);var C=o(n,2);{var j=H=>{var de=Ts(),ge=s(de),ue=s(ge),ke=s(ue),ma=o(s(ke));Q(ma,1,()=>e(ne),ee,(ze,A,te)=>{var ve=gs(),q=s(ve);{var P=W=>{var K=ps();const fe=ya(()=>kt(e(A).data));var ra=s(K),sa=s(ra);{var ga=M=>{var S=ns();p(()=>{ta(S,"src",e(fe)),ta(S,"alt",e(A).name)}),Ot(S),i(M,S)},qe=M=>{var S=ds();i(M,S)};x(sa,M=>{e(fe)?M(ga):M(qe,!1)})}t(ra);var We=o(ra,2),Ee=s(We),Xe=s(Ee,!0);t(Ee);var Ye=o(Ee,2),Ce=s(Ye),Ge=s(Ce,!0);t(Ce);var Me=o(Ce,2),ha=s(Me,!0);t(Me);var ua=o(Me,2);{var Ve=M=>{var S=vs(),_=s(S,!0);t(S),p(()=>f(_,e(A).subtype)),i(M,S)};x(ua,M=>{e(A).subtype&&e(A).subtype!=="none"&&M(Ve)})}var O=o(ua,2),_e=s(O);t(O);var je=o(O,2);{var ce=M=>{var S=cs(),_=s(S,!0);t(S),p(()=>f(_,e(A).isMineUnit?"Mine":"Suicide")),i(M,S)};x(je,M=>{var S;(S=e(A))!=null&&S.isSuicideUnit&&M(ce)})}t(Ye),t(We),t(K),p(()=>{ta(Ee,"href",`${Ia??""}/unit?name=${e(A).id??""}`),f(Xe,e(A).name),f(Ge,e(A).faction==="arm"?"Armada":"Cortex"),f(ha,e(A).type),f(_e,`Tech ${e(A).tech??""}`)}),i(W,K)},re=W=>{var K=ms();i(W,K)};x(q,W=>{e(A)?W(P):W(re,!1)})}t(ve),p(()=>he(ve,`w-1/4 min-w-[300px] bg-gray-800/95 p-4 backdrop-blur-sm ${(te===e(ne).length-1?"rounded-tr-lg":"")??""}`)),i(ze,ve)}),t(ke),t(ue);var $e=o(ue);Q($e,5,()=>Object.entries(e(ae)),ee,(ze,A)=>{let te=()=>e(A)[0],ve=()=>e(A)[1];var q=He(),P=ie(q);{var re=W=>{var K=As(),fe=ie(K);const ra=ya(()=>`${yt(te())??""} svelte-dsi7k9`);var sa=s(fe),ga=s(sa),qe=s(ga);const We=ya(()=>`absolute inset-0 ${yt(te())??""} svelte-dsi7k9`);var Ee=o(qe,2),Xe=s(Ee),Ye=s(Xe);p(()=>ta(Ye,"d",ht(te()))),t(Xe);var Ce=o(Xe,2),Ge=s(Ce,!0);t(Ce),t(Ee),t(ga),t(sa),t(fe);var Me=o(fe,2);{var ha=Ve=>{var O=He(),_e=ie(O);{var je=ce=>{var M=Cs(),S=o(s(M));Q(S,1,()=>e(ne),ee,(_,l)=>{var m=ks(),w=s(m),R=s(w);{var G=z=>{var Y=hs(),be=ie(Y);{var la=F=>{var N=us(),se=s(N),Z=s(se);t(se);var Se=o(se,2),J=s(Se);t(Se),t(N),p(()=>{f(Z,`DPS: ${e(l).combatStats.totalDps??""}`),f(J,`Range: ${e(l).combatStats.maxRange??""}`)}),i(F,N)};x(be,F=>{e(l).combatStats&&F(la)})}var Be=o(be,2);Q(Be,5,()=>e(l).weapons,ee,(F,N)=>{var se=ys(),Z=s(se),Se=s(Z),J=o(Se);{var Ne=V=>{var I=fs();i(V,I)};x(J,V=>{e(N).isEMP&&V(Ne)})}var xe=o(J,2);{var ye=V=>{var I=_s();i(V,I)};x(xe,V=>{e(N).isNotFlame&&V(ye)})}t(Z);var Je=o(Z,2),le=s(Je),oa=o(s(le),2),Ea=s(oa,!0);t(oa),t(le);var fa=o(le,2),Va=o(s(fa),2),Pe=s(Va);{var _a=V=>{var I=me("N/A (EMP)");i(V,I)},Ba=V=>{var I=He(),pe=ie(I);{var Ue=D=>{var Ke=me("N/A (Special)");i(D,Ke)},Aa=D=>{var Ke=me();p(()=>f(Ke,e(N).dps)),i(D,Ke)};x(pe,D=>{e(N).isNotFlame?D(Ue):D(Aa,!1)},!0)}i(V,I)};x(Pe,V=>{e(N).isEMP?V(_a):V(Ba,!1)})}t(Va),t(fa);var Pa=o(fa,2);{var Na=V=>{var I=bs(),pe=ie(I),Ue=s(pe),Aa=s(Ue,!0);p(()=>f(Aa,Fa("paralyzemultiplier"))),t(Ue);var D=o(Ue,2),Ke=s(D);t(D),t(pe);var Re=o(pe,2),Ze=o(s(Re),2),Oa=s(Ze,!0);t(Ze),t(Re),p(()=>{f(Ke,`x${e(N).paralyzeMultiplier??""}`),f(Oa,e(N).paralyzeDps)}),i(V,I)};x(Pa,V=>{e(N).isEMP&&V(Na)})}var Qe=o(Pa,2);{var ba=V=>{var I=xs(),pe=o(s(I),2),Ue=s(pe);t(pe),t(I),p(()=>f(Ue,`x${e(N).burstCount??""}`)),i(V,I)};x(Qe,V=>{e(N).burstCount>1&&V(ba)})}var Ua=o(Qe,2),Ra=o(s(Ua),2),y=s(Ra,!0);t(Ra),t(Ua);var b=o(Ua,2),oe=o(s(b),2),ct=s(oe);t(oe),t(b),t(Je),t(se),p(()=>{f(Se,`${e(N).type??""} `),f(Ea,e(N).damage),f(y,e(N).range),f(ct,`${e(N).reloadTime??""}s`)}),i(F,se)}),t(Be),i(z,Y)},X=z=>{var Y=ws();i(z,Y)};x(R,z=>{var Y,be;((be=(Y=e(l))==null?void 0:Y.weapons)==null?void 0:be.length)>0?z(G):z(X,!1)})}t(w),t(m),i(_,m)}),t(M),i(ce,M)};x(_e,ce=>{e(ne).some(M=>{var S;return((S=M==null?void 0:M.weapons)==null?void 0:S.length)>0})&&ce(je)})}i(Ve,O)};x(Me,Ve=>{te()==="combat"&&Ve(ha)})}var ua=o(Me,2);Q(ua,1,ve,ee,(Ve,O)=>{var _e=Us();const je=ya(()=>e(ne).map(l=>{var m;return(m=l==null?void 0:l.data)==null?void 0:m[e(O)]})),ce=ya(()=>e(je).every(l=>l===e(je)[0]));var M=s(_e),S=s(M,!0);p(()=>f(S,Fa(e(O)))),t(M);var _=o(M);Q(_,1,()=>e(je),ee,(l,m)=>{var w=Ns(),R=s(w);{var G=z=>{var Y=Ms();i(z,Y)},X=z=>{var Y=He(),be=ie(Y);{var la=F=>{var N=He(),se=ie(N);{var Z=J=>{var Ne=js(),xe=ie(Ne),ye=s(xe);Tr(ye,{get data(){return e(m)}}),t(xe);var Je=o(xe,2);Ae("click",Je,()=>xt(e(O))),i(J,Ne)},Se=J=>{var Ne=Ss(),xe=s(Ne);{var ye=le=>{var oa=me();p(()=>f(oa,`View Build Options (${Object.keys(e(m)).length??""})`)),i(le,oa)},Je=le=>{var oa=He(),Ea=ie(oa);{var fa=Pe=>{var _a=me();p(()=>f(_a,`View Weapon Definitions (${Object.keys(e(m)).length??""})`)),i(Pe,_a)},Va=Pe=>{var _a=He(),Ba=ie(_a);{var Pa=Qe=>{var ba=me();p(()=>f(ba,`View Weapons (${Object.keys(e(m)).length??""})`)),i(Qe,ba)},Na=Qe=>{var ba=He(),Ua=ie(ba);{var Ra=b=>{var oe=me();p(()=>f(oe,`View Custom Parameters (${Object.keys(e(m)).length??""})`)),i(b,oe)},y=b=>{var oe=me();p(()=>f(oe,`View Details (${Object.keys(e(m)).length??""})`)),i(b,oe)};x(Ua,b=>{e(O)==="customparams"?b(Ra):b(y,!1)},!0)}i(Qe,ba)};x(Ba,Qe=>{e(O)==="weapons"?Qe(Pa):Qe(Na,!1)},!0)}i(Pe,_a)};x(Ea,Pe=>{e(O)==="weapondefs"?Pe(fa):Pe(Va,!1)},!0)}i(le,oa)};x(xe,le=>{e(O)==="buildoptions"?le(ye):le(Je,!1)})}t(Ne),Ae("click",Ne,()=>xt(e(O))),i(J,Ne)};x(se,J=>{e(za).has(e(O))?J(Z):J(Se,!1)})}i(F,N)},Be=F=>{var N=me();p(()=>f(N,$t(e(m),e(O)))),i(F,N)};x(be,F=>{typeof e(m)=="object"&&e(m)!==null?F(la):F(Be,!1)},!0)}i(z,Y)};x(R,z=>{e(m)===void 0||e(m)===null?z(G):z(X,!1)})}t(w),p(()=>he(w,`p-4 text-center ${(!e(ce)&&e(m)!==void 0?"font-medium":"")??""} ${(e(ce)?"text-gray-300":"text-white")??""}`)),i(l,w)}),t(_e),i(Ve,_e)}),p(()=>{he(fe,e(ra)),ta(sa,"colspan",e(ne).length+1),he(qe,e(We)),f(Ge,te())}),i(W,K)};x(P,W=>{ve().length>0&&W(re)})}i(ze,q)}),t($e),t(ge),t(de),Ae("mouseenter",de,ir),i(H,de)},U=H=>{var de=zs();i(H,de)};x(C,H=>{e(ne).some(de=>de)?H(j):H(U,!1)})}t(r),Ae("click",v,Kt),i(a,r)};x(gr,a=>{e(we)==="browse"?a(ur):a(fr,!1)})}t(ot);var vt=o(ot,2);Q(vt,5,()=>e(Xa),a=>a.id,(a,r)=>{var n=Vs(),c=s(n,!0);t(n),p(()=>{he(n,`rounded-lg bg-gray-900 px-4 py-3 text-sm shadow-lg ring-1 ${(e(r).type==="success"?"text-teal-400 ring-teal-500/50":"text-red-400 ring-red-500/50")??""}`),f(c,e(r).message)}),Ur(3,n,()=>Ar,()=>({y:20,duration:300})),i(a,n)}),t(vt);var _r=o(vt,2);Nr(_r,{imageUrl:vr,get visible(){return e(dr)},get x(){return e(cr)},get y(){return e(pr)}}),t(lt),p(()=>{he(Mt,`rounded-xl bg-gray-800/50 p-6 ${(e(we)==="browse"?"ring-2 ring-teal-500/50":"")??""}`),he(mr,`rounded-xl bg-gray-800/50 p-6 ${(e(we)==="compare"?"ring-2 ring-teal-500/50":"")??""}`),he(dt,`rounded-lg px-6 py-3 font-medium transition-all ${(e(we)==="browse"?"bg-teal-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700")??""}`),he(jt,`rounded-lg px-6 py-3 font-medium transition-all ${(e(we)==="compare"?"bg-teal-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700")??""}`)}),Ae("click",dt,()=>T(we,"browse")),Ae("click",jt,()=>T(we,"compare")),i(d,lt),hr()}export{Ks as component};
