import{a as i,t as u,b as Ve,c as va,n as Ya}from"../chunks/disclose-version.iW0qSyoW.js";import"../chunks/legacy.JF8MfT_v.js";import{ar as dr,B as $t,x as Ht,w as qt,v as Wt,p as vr,l as lt,a as cr,t as c,b as pr,d as E,g as e,m as ue,c as r,s as o,r as t,n as mr,ab as zt,as as ya,ad as Ce,ac as Ma}from"../chunks/runtime.7jUv2Dyy.js";import{s as p}from"../chunks/render.TDnE1tZP.js";import{i as x}from"../chunks/if.CW4Kzy0i.js";import{e as X,i as I}from"../chunks/each.Cts97b-y.js";import{N as ur,l as fr,r as ot,u as gr,a as _r,s as Ua,b as br,c as $e}from"../chunks/Navbar.C5VETPTV.js";import{l as ct,e as Ie}from"../chunks/events.olTridf3.js";import{g as Va,t as xr,p as Bt,b as Ot,i as Pt,a as it,c as yr,f as Rt}from"../chunks/propertyDisplay.DYZzsKB_.js";import{i as hr}from"../chunks/proxy.c5Kuc8mw.js";import{i as wr}from"../chunks/lifecycle.LCaU2pS-.js";import{s as kr,a as Ft}from"../chunks/store.CqbNW2AY.js";import{o as Cr}from"../chunks/index-client.CuyGrnjy.js";import{b as nt}from"../chunks/paths.CBQEvhbu.js";function Lt(d,R,D=R){var f=dr();ct(d,"input",z=>{var fe=z?d.defaultValue:d.value;if(fe=dt(d)?vt(fe):fe,D(fe),f&&fe!==(fe=R())){var Me=d.selectionStart,He=d.selectionEnd;d.value=fe??"",He!==null&&(d.selectionStart=Me,d.selectionEnd=Math.min(He,d.value.length))}}),($t&&d.defaultValue!==d.value||Ht(R)==null&&d.value)&&D(dt(d)?vt(d.value):d.value),qt(()=>{var z=R();dt(d)&&z===vt(d.value)||d.type==="date"&&!z&&!d.value||z!==d.value&&(d.value=z??"")})}function Mr(d,R,D=R){ct(d,"change",f=>{var z=f?d.defaultChecked:d.checked;D(z)}),($t&&d.defaultChecked!==d.checked||Ht(R)==null)&&D(d.checked),qt(()=>{var f=R();d.checked=!!f})}function dt(d){var R=d.type;return R==="number"||R==="range"}function vt(d){return d===""?null:+d}function Yt(d,R,D){if(d.multiple)return Sr(d,R);for(var f of d.options){var z=Wa(f);if(hr(z,R)){f.selected=!0;return}}(!D||R!==void 0)&&(d.selectedIndex=-1)}function jr(d,R){Wt(()=>{var D=new MutationObserver(()=>{var f=d.__value;Yt(d,f)});return D.observe(d,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{D.disconnect()}})}function Ba(d,R,D=R){var f=!0;ct(d,"change",z=>{var fe=z?"[selected]":":checked",Me;if(d.multiple)Me=[].map.call(d.querySelectorAll(fe),Wa);else{var He=d.querySelector(fe)??d.querySelector("option:not([disabled])");Me=He&&Wa(He)}D(Me)}),Wt(()=>{var z=R();if(Yt(d,z,f),f&&z===void 0){var fe=d.querySelector(":checked");fe!==null&&(z=Wa(fe),D(z))}d.__value=z,f=!1}),jr(d)}function Sr(d,R){for(var D of d.options)D.selected=~R.indexOf(Wa(D))}function Wa(d){return"__value"in d?d.__value:d.value}var Nr=u("<option> </option>"),Ar=u("<option> </option>"),Tr=u("<option> </option>"),Ur=u("<optgroup></optgroup>"),Vr=u('<div class="flex items-center gap-3"><select class="rounded-lg bg-gray-900 px-3 py-2 text-gray-200"><option>Select field...</option><!></select> <select class="rounded-lg bg-gray-900 px-3 py-2 text-gray-200"><option>greater than</option><option>less than</option><option>=</option></select> <input type="number" class="rounded-lg bg-gray-900 px-3 py-2 text-gray-200" placeholder="Value"> <button aria-label="Remove filter" class="text-gray-400 hover:text-red-400"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),Er=u('<div class="space-y-3"></div>'),zr=u('<label class="flex items-center gap-2 rounded-lg bg-gray-900/50 px-3 py-2"><input type="checkbox" class="rounded border-gray-600 bg-gray-800 text-teal-500 focus:ring-teal-500"> <span class="text-sm text-gray-300"> </span></label>'),Br=Ya('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 9L4 4m0 0l5 0m-5 0l0 5M9 15l-5 5m0 0l5 0m-5 0l0 -5M15 9l5 -5m0 0l-5 0m5 0l0 5M15 15l5 5m0 0l-5 0m5 0l0 -5"></path>'),Or=Ya('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-5h-4m4 0v4m0-4l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5h-4m4 0v-4m0 4l-5-5"></path>'),Pr=Ya('<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>'),Rr=u('<th><div class="flex items-center gap-1"> <!></div></th>'),Fr=Ya('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>'),Lr=Ya('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>'),$r=u('<span class="rounded-full bg-pink-500/20 px-2 py-0.5 text-xs text-pink-400"> </span>'),Hr=u('<span class="rounded-full bg-red-500/20 px-2 py-0.5 text-xs text-red-400"> </span>'),qr=u('<td class="p-3 text-right text-gray-300"><!></td>'),Wr=u('<tr class="border-b border-gray-800/50 hover:bg-gray-800/30"><td class="sticky left-0 z-10 bg-gray-900 p-3"><div class="flex min-w-[250px] items-center justify-between"><div class="flex items-center gap-3"><button><span><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><!></svg></span> <span class="group-hover:opacity-100 opacity-70"> </span></button> <a class="text-teal-400 hover:underline"> </a></div> <div class="flex h-6 items-center gap-2"><span class="rounded-full bg-teal-500/20 px-2 py-0.5 text-xs text-teal-400"> </span> <span class="rounded-full bg-purple-500/20 px-2 py-0.5 text-xs text-purple-400"> </span> <!> <span class="rounded-full bg-blue-500/20 px-2 py-0.5 text-xs text-blue-400"> </span> <!></div></div></td><!></tr>'),Yr=u('<div class="rounded-lg bg-gray-800/50 p-6"><div class="mb-6"><div class="relative"><input type="text" placeholder="Search units..." class="w-full rounded-lg bg-gray-900 py-2 pl-10 pr-4 text-gray-200 placeholder-gray-500"> <svg class="absolute left-3 top-2.5 h-5 w-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div></div> <div class="mb-6 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-5"><div class="space-y-2"><label for="tech-level" class="text-sm text-gray-400">Tech Level</label> <select id="tech-level" class="w-full rounded-lg bg-gray-900 px-3 py-2 text-gray-200"><option>All Tech Levels</option><option>Tech 1</option><option>Tech 2</option></select></div> <div class="space-y-2"><label for="unit-type" class="text-sm text-gray-400">Unit Type</label> <select id="unit-type" class="w-full rounded-lg bg-gray-900 px-3 py-2 text-gray-200"><option>All Types</option><!></select></div> <div class="space-y-2"><label for="sub-type" class="text-sm text-gray-400">Sub Type</label> <select id="sub-type" class="w-full rounded-lg bg-gray-900 px-3 py-2 text-gray-200"><option>All Sub Types</option><!></select></div> <div class="space-y-2"><label for="faction" class="text-sm text-gray-400">Faction</label> <select id="faction" class="w-full rounded-lg bg-gray-900 px-3 py-2 text-gray-200"><option>All Factions</option><option>Armada</option><option>Cortex</option></select></div></div> <div class="mb-6"><div class="mb-4 flex items-center justify-between"><h3 class="text-sm font-medium text-gray-300">Custom Filters</h3> <button class="flex items-center gap-2 text-sm text-teal-400 hover:text-teal-300"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> Add Filter</button></div> <!></div> <div class="mb-6"><div class="mb-4 flex items-center justify-between"><h3 class="text-sm font-medium text-gray-300">Visible Columns</h3> <button class="flex items-center gap-2 text-sm text-teal-400 hover:text-teal-300"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> Add Column</button></div> <div class="flex flex-wrap gap-2"></div></div> <div><div class="table-controls flex justify-end mb-2 svelte-10uyojr"><button class="flex items-center gap-2 rounded-lg bg-gray-800/80 px-3 py-1.5 text-sm text-gray-300 transition-colors hover:bg-gray-700 hover:text-white"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><!></svg> </button></div> <div id="browse-table-container"><table class="relative w-full"><thead><tr class="sticky top-0 z-20 border-b border-gray-700 bg-gray-900/95 backdrop-blur-sm"></tr></thead><tbody class="divide-y divide-gray-800/50"></tbody></table></div></div></div>'),Gr=u('<button class="text-gray-400 transition-colors hover:text-red-400" aria-label="Remove unit slot"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>'),Jr=u('<option class="flex items-center gap-2"> </option>'),Qr=u('<div class="min-w-[250px] max-w-[300px] flex-1 rounded-lg bg-gray-800/50 p-4"><div class="mb-4 flex items-center justify-between"><h3 class="font-medium text-white"></h3> <!></div> <select class="w-full rounded-lg border border-gray-600/50 bg-gray-700/50 px-3 py-2 text-white"><option>Select a unit...</option><!></select></div>'),Kr=u('<span class="rounded-full bg-pink-500/20 px-2 py-0.5 text-pink-400"> </span>'),Xr=u('<span class="rounded-full bg-red-500/20 px-2 py-0.5 text-red-400"> </span>'),Zr=u('<div class="space-y-1"><a class="inline-block font-medium text-white transition-colors hover:text-teal-400"> </a> <div class="flex justify-center gap-2 text-sm"><span class="rounded-full bg-teal-500/20 px-2 py-0.5 text-teal-400"> </span> <span class="rounded-full bg-purple-500/20 px-2 py-0.5 text-purple-400"> </span> <!> <span class="rounded-full bg-blue-500/20 px-2 py-0.5 text-blue-400"> </span> <!></div></div>'),Ir=u('<span class="text-gray-500">No unit selected</span>'),Dr=u("<th><!></th>"),es=u('<div class="flex justify-center gap-2 text-sm"><span class="rounded-full bg-red-500/20 px-2 py-0.5 text-red-400"> </span> <span class="rounded-full bg-blue-500/20 px-2 py-0.5 text-blue-400"> </span></div>'),as=u('<span class="ml-1 rounded-full bg-yellow-500/20 px-2 py-0.5 text-xs font-medium text-yellow-400">EMP</span>'),ts=u('<span class="ml-1 rounded-full bg-orange-500/20 px-2 py-0.5 text-xs font-medium text-orange-400">Special</span>'),rs=u('<div class="flex justify-between"><span class="text-gray-400"> </span> <span class="font-medium text-yellow-400"> </span></div> <div class="flex justify-between"><span class="text-gray-400">Paralyze DPS</span> <span class="font-medium text-yellow-400"> </span></div>',1),ss=u('<div class="flex justify-between"><span class="text-gray-400">Burst</span> <span class="font-medium text-green-400"> </span></div>'),ls=u('<div class="rounded-lg border border-gray-700/30 bg-gray-900/50 p-3"><div class="mb-2 font-medium text-gray-300"> <!> <!></div> <div class="grid grid-cols-2 gap-2 text-sm"><div class="flex justify-between"><span class="text-gray-400">Damage</span> <span class="font-medium text-red-400"> </span></div> <div class="flex justify-between"><span class="text-gray-400">DPS</span> <span class="font-medium text-orange-400"><!></span></div> <!> <!> <div class="flex justify-between"><span class="text-gray-400">Range</span> <span class="font-medium text-blue-400"> </span></div> <div class="flex justify-between"><span class="text-gray-400">Reload</span> <span class="font-medium text-purple-400"> </span></div></div></div>'),os=u('<!> <div class="mt-4 space-y-3"></div>',1),is=u('<div class="flex items-center justify-center rounded-lg border border-gray-700/30 bg-gray-900/50 p-4"><span class="text-sm text-gray-500">No weapons</span></div>'),ns=u('<td class="p-4 align-top"><div class="top-0 rounded-lg bg-gray-800/50 p-4"><!></div></td>'),ds=u('<tr><td class="left-0 bg-gray-900/95 p-4"></td><!></tr>'),vs=u('<span class="text-gray-500">—</span>'),cs=u('<span class="rounded-full bg-purple-500/20 px-1.5 py-0.5 text-xs text-purple-400"> </span>'),ps=u('<div class="mt-1.5 grid grid-cols-3 gap-1 text-xs"><div class="flex justify-between rounded bg-gray-700/30 px-1.5 py-0.5"><span class="text-gray-400">HP:</span> <span class="font-medium text-red-400"> </span></div> <div class="flex justify-between rounded bg-gray-700/30 px-1.5 py-0.5"><span class="text-gray-400">Metal:</span> <span class="font-medium text-blue-400"> </span></div> <div class="flex justify-between rounded bg-gray-700/30 px-1.5 py-0.5"><span class="text-gray-400">Time:</span> <span class="font-medium text-green-400"> </span></div></div>'),ms=u('<a class="group flex items-start gap-3 rounded-lg bg-gray-800/90 p-3 transition-all hover:bg-gray-700/80 hover:shadow-md"><div class="flex h-10 w-10 shrink-0 items-center justify-center rounded-md bg-gray-700/70 text-lg font-bold text-teal-300"> </div> <div class="flex flex-1 flex-col"><div class="flex items-center justify-between"><span class="text-sm font-medium text-white"> </span> <span class="rounded bg-blue-500/20 px-1.5 py-0.5 text-xs font-medium text-blue-400"> </span></div> <div class="mt-1 flex flex-wrap gap-1"><span class="rounded-full bg-teal-500/20 px-1.5 py-0.5 text-xs text-teal-400"> </span> <!></div> <!></div></a>'),us=u('<div class="grid gap-2"></div>'),fs=u('<div class="flex items-center gap-2"><span class="text-sm text-gray-400"> </span> <span class="text-sm text-gray-200"> </span></div>'),gs=u('<div class="ml-4 space-y-1"></div>'),_s=u('<span class="text-sm text-gray-200"> </span>'),bs=u('<div class="flex items-center gap-2 px-2 py-1 hover:bg-gray-800/50"><span class="text-sm text-gray-400"> </span> <!></div>'),xs=u('<div class="flex flex-col gap-2"></div>'),ys=u('<!> <button class="mt-2 text-xs text-teal-400 hover:text-teal-300">Collapse</button>',1),hs=u('<button class="text-sm text-teal-400 hover:text-teal-300"><!></button>'),ws=u("<td><!></td>"),ks=u('<tr class="transition-colors hover:bg-gray-800/30"><td class="sticky left-0 z-10 p-4 pl-8 text-gray-400" style="background: linear-gradient(to right, rgb(17 24 39 / 0.95), rgb(17 24 39 / 0.95)) padding-box, rgb(55 65 81 / 0.5) border-box; border-right: 2px solid transparent; backdrop-filter: blur(4px);"> </td><!></tr>'),Cs=u('<tr><td class="sticky left-0 p-4 font-medium text-teal-400"><div class="flex items-center gap-2"><div></div> <div class="relative flex items-center gap-2"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></path></svg> <span class="capitalize"> </span></div></div></td></tr> <!> <!>',1),Ms=u('<div class="relative overflow-auto" style="max-height: calc(100vh - 250px);" role="region"><table class="relative w-full border-collapse"><thead><tr class="sticky top-0 z-20"><th class="sticky left-0 z-30 w-1/4 min-w-[200px] rounded-tl-lg bg-gray-800/95 p-4 text-left backdrop-blur-sm">Property</th><!></tr></thead><tbody class="divide-y divide-gray-800/50"></tbody></table></div>'),js=u('<div class="py-12 text-center text-gray-400">Select units to compare their properties</div>'),Ss=u('<div class="rounded-lg bg-gray-900 shadow-xl"><header class="mb-8 text-center"><h1 class="mb-4 bg-gradient-to-r from-teal-400 to-blue-500 bg-clip-text text-4xl font-bold text-transparent">Unit Comparison</h1> <p class="mx-auto max-w-2xl text-gray-400">Compare multiple units side by side. Add or remove units using the controls below.</p></header> <div class="mb-8"><div class="flex flex-wrap items-start gap-4"><!> <button class="flex items-center gap-2 rounded-lg bg-teal-600/20 px-4 py-2 text-teal-400 transition-colors hover:bg-teal-600/30"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> Add Unit</button></div></div> <!></div>'),Ns=u("<div> </div>"),As=u('<div class="min-h-screen bg-gray-900 text-gray-100"><!> <div class="container mx-auto max-w-7xl px-4 py-8"><div class="mb-12 grid gap-8 md:grid-cols-2"><div><div class="mb-4 flex items-center gap-3"><svg class="h-6 w-6 text-teal-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> <h2 class="text-xl font-semibold text-teal-300">Browse Mode</h2></div> <ul class="ml-4 space-y-2 text-gray-300"><li>• Filter units by type, faction, and tech level</li> <li>• Add custom filters for specific unit properties</li> <li>• Sort columns by clicking column headers</li> <li>• Customize visible columns using the column manager</li> <li>• Click unit names to view detailed information</li></ul></div> <div><div class="mb-4 flex items-center gap-3"><svg class="h-6 w-6 text-teal-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg> <h2 class="text-xl font-semibold text-teal-300">Compare Mode</h2></div> <ul class="ml-4 space-y-2 text-gray-300"><li>• Select multiple units to compare side by side</li> <li>• Add or remove unit slots as needed</li> <li>• Properties are grouped by category</li> <li>• Different values are highlighted for easy comparison</li> <li>• Expand object properties to see detailed information</li></ul></div></div> <div class="mb-8 flex justify-center gap-4"><button>Browse Units</button> <button>Compare Units</button></div> <!></div> <div class="fixed bottom-4 right-4 z-50 flex flex-col gap-2"></div></div>');function Ws(d,R){vr(R,!1);const D=kr(),f=()=>Ft(gr,"$unitsData",D),z=()=>Ft(_r,"$unitNamesDetails",D),fe=ue(),Me=ue();let He=ue("browse"),ca=ue([{id:"unit",name:"Unit",visible:!0},{id:"type",name:"Type",visible:!0},{id:"subtype",name:"Subtype",visible:!1},{id:"faction",name:"Faction",visible:!1},{id:"tech",name:"Tech Level",visible:!1},{id:"health",name:"Health",visible:!0},{id:"sightDistance",name:"Sight Range",visible:!0},{id:"maxRange",name:"Weapon Range",visible:!0},{id:"dps",name:"DPS",visible:!0},{id:"armor_type",name:"Armor",visible:!0}]),Ga=ue(""),Pa=ue("all"),Ea=ue("all"),Ra=ue("all"),Fa=ue("all"),De=ue([]),La=ue("name"),$a=ue("asc"),C=ue(["",""]),Ja=ue([]),Oa=ue(new Set);const pt=["name","faction","type","subtype","path","description","unitname","side","icontype","script","buildpic","category","customparams"],Qa=["health","maxdamage","damagemodifier","armorType","seismicdistance","seismicsignature","hidedamage","autoheal","idleautoheal","idletime","mass","footprintx","footprintz"],Ka=["maxvelocity","acceleration","brakerate","turnradius","turnrate","turninplace","turninplaceanglelimit","turninplacespeedlimit","movementclass","moverate1","cruisealt","cruisealtitude","amphibious","floater","upright","canhover","canfly","canmove","canland","airstrafe","airhoverfactor","hoverattack","leavetracks","trackoffset","trackstretch","trackstrength","tracktype","trackwidth","maxacc","maxdec","speed","transportcapacity"],Xa=["canattack","canattackground","canmanualfire","canpatrol","canrepeat","canresurrect","cancloak","cancapture","weapondefs","weapons","radardistance","radardistancejam","sonardistance","sonarstealth","stealth","cloaked","cloakcost","cloakcostmoving","initcloak","firestate","standingmoveorder","strafetoattack","hightrajectory","kamikaze","kamikazedistance","sightdistance","airsightdistance","onlytargetcategory2","exemptcategory","radarEmitHeight","noautofire","nochase","nochasecategory","turret"],Za=["buildcostenergy","buildcostmetal","buildtime","energycost","energymake","energypershot","energystorage","energyupkeep","extractsmetal","metalcost","metalmake","metalstorage","terraformspeed","workertime","capture","reclaimable","reclaimspeed","repairable","buildoptions"],Ia=[{category:"Stats",fields:[...Qa.map(a=>({id:a,name:Va(a),type:"number"}))]},{category:"Combat",fields:[...Xa.map(a=>({id:a,name:Va(a),type:"number"}))]},{category:"Movement",fields:[...Ka.map(a=>({id:a,name:Va(a),type:"number"}))]},{category:"Resources",fields:[...Za.map(a=>({id:a,name:Va(a),type:"number"}))]}];function Gt(){E(C,[...e(C),""])}function Jt(a){E(C,e(C).filter((s,n)=>n!==a))}function Da(a,s){return a==null?"—":typeof a=="boolean"?a?"Yes":"No":typeof a=="number"?s==="buildtime"?mt(a/100):s.toLowerCase().includes("time")?mt(a):a.toLocaleString():a}function mt(a){if(a<60)return`${a}s`;const s=Math.floor(a/60),n=a%60;return n>0?`${s}m ${n}s`:`${s}m`}function Qt(a){const s=new Set;a.forEach(m=>{var S,A;if(!m)return;const j=(S=f())==null?void 0:S[m];(A=j==null?void 0:j.data)!=null&&A[m]&&Object.keys(j.data[m]).forEach(F=>s.add(F))});const n=Array.from(s),v=m=>e(Me).reduce((j,S)=>{var A;return j+(((A=S==null?void 0:S.data)==null?void 0:A[m])!==void 0?1:0)},0),y=m=>[...m].sort((j,S)=>v(S)-v(j));return{general:y(n.filter(m=>pt.includes(m))),stats:y(n.filter(m=>Qa.includes(m))),movement:y(n.filter(m=>Ka.includes(m))),combat:y(n.filter(m=>Xa.includes(m))),resources:y(n.filter(m=>Za.includes(m))),custom:n.filter(m=>!pt.includes(m)&&!Qa.includes(m)&&!Ka.includes(m)&&!Xa.includes(m)&&!Za.includes(m))}}function ut(a){e(Oa).has(a)?e(Oa).delete(a):e(Oa).add(a),E(Oa,e(Oa))}Cr(async()=>{await fr(),f()&&z()&&E(Ja,Object.entries(f()).map(([a,s])=>({id:a,name:z().units.names[a]||a,faction:s.faction,type:s.type,subtype:s.subtype,tech:s.tech_level})).filter(a=>a.type&&a.type!=="other").sort((a,s)=>a.name.localeCompare(s.name)))});let za=ue(!1);function Kt(){E(za,!e(za))}function ft(a,s=0){return s>3||typeof a!="object"||a===null?Da(a):Object.entries(a).map(([n,v])=>({key:n,value:typeof v=="object"&&v!==null?ft(v,s+1):Da(v,n)}))}function gt(a){const s={general:"bg-blue-900/20 border-l-4 border-blue-500/50",stats:"bg-green-900/20 border-l-4 border-green-500/50",movement:"bg-yellow-900/20 border-l-4 border-yellow-500/50",combat:"bg-red-900/20 border-l-4 border-red-500/50",resources:"bg-purple-900/20 border-l-4 border-purple-500/50",custom:"bg-gray-800/30 border-l-4 border-gray-500/50"};return s[a]||s.custom}function _t(a){const s={general:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0114 0z",stats:"M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z",movement:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z",combat:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064",resources:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z",custom:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"};return s[a]||s.custom}function Xt(){if(!f())return[];let a=Object.entries(f()).filter(([s,n])=>n.type&&n.type!=="other").map(([s,n])=>{var j;const v=((j=n.data)==null?void 0:j[s])||{},y=Bt(v==null?void 0:v.weapondefs),m=Ot(y,v,s);return{id:s,name:z().units.names[s]||s,type:n.type,subtype:n.subtype,tech:n.tech_level,faction:n.faction,health:(v==null?void 0:v.maxdamage)||0,sightDistance:(v==null?void 0:v.sightdistance)||0,maxRange:(m==null?void 0:m.maxRange)||0,dps:(m==null?void 0:m.totalDps)||0,isSuicideUnit:Pt(v),isMineUnit:it(v),armor:(v==null?void 0:v.armor)||0,...Object.fromEntries(Object.entries(v).map(([S,A])=>[S,typeof A=="object"?JSON.stringify(A):A]))}}).filter(s=>{if(e(Pa)!=="all"&&s.tech!==parseInt(e(Pa))||e(Ea)!=="all"&&s.type!==e(Ea)||e(Ra)!=="all"&&s.subtype!==e(Ra)||e(Fa)!=="all"&&s.faction!==e(Fa))return!1;if(e(Ga)){const n=e(Ga).toLowerCase();return s.name.toLowerCase().includes(n)||s.type.toLowerCase().includes(n)||s.subtype.toLowerCase().includes(n)}return!0});return e(De).forEach(s=>{s.field&&s.operator&&s.value!==""&&(a=a.filter(n=>{const v=n[s.field],y=Number(s.value);switch(s.operator){case">":return v>y;case"<":return v<y;case"=":return v===y;default:return!0}}))}),a.sort((s,n)=>{const v=s[e(La)],y=n[e(La)],m=e($a)==="asc"?1:-1;return v==null?1:y==null?-1:typeof v=="string"&&typeof y=="string"?!isNaN(Number(v))&&!isNaN(Number(y))?(Number(v)-Number(y))*m:v.toLowerCase().localeCompare(y.toLowerCase())*m:(v-y)*m})}function Zt(){return f()?[...new Set(Object.values(f()).map(a=>a.type))].filter(Boolean).sort():[]}function It(){if(!f())return[];const s=Object.values(f()).filter(n=>e(Ea)==="all"||n.type===e(Ea)).map(n=>n.subtype);return[...new Set(s)].filter(Boolean).sort()}function Dt(){E(De,[...e(De),{field:"",operator:">",value:""}])}function er(a){E(De,e(De).filter((s,n)=>n!==a))}function ar(a){const s=a.id==="unit"?"name":a.id;console.log("Sorting by:",a,s),e(La)===s?E($a,e($a)==="asc"?"desc":"asc"):(E(La,s),E($a,"asc"))}function tr(){const a=document.createElement("dialog");a.className="bg-gray-900 rounded-lg p-6 backdrop:bg-black/50 max-w-7xl";const s=document.createElement("div");s.className="mb-4 border-b border-gray-700 pb-3",s.innerHTML=`
			<h2 class="text-xl font-semibold text-white">Add Columns to Table</h2>
			<p class="text-sm text-gray-400 mt-1">Select columns to add to your comparison view</p>
		`;const n=document.createElement("div");n.className="max-h-[60vh] overflow-auto";const v=document.createElement("div");v.className="grid grid-cols-4 gap-6",n.appendChild(v),Ia.forEach(m=>{const j=m.fields.filter(S=>!e(ca).some(A=>A.id===S.id));if(j.length){const S=document.createElement("div");S.className="mb-4",S.innerHTML=`
					<h3 class="text-white font-medium mb-2 flex items-center gap-2">
						<svg class="h-5 w-5 text-teal-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="${_t(m.category.toLowerCase())}"></path>
						</svg>
						${m.category}
					</h3>
					<div class="space-y-1 border rounded-lg border-gray-700/50 bg-gray-800/30 p-2">
						${j.map(A=>`
							<label class="flex items-center gap-2 p-2 hover:bg-gray-800 rounded cursor-pointer">
								<input type="checkbox" value="${A.id}" data-name="${A.name}" class="rounded border-gray-600">
								<span class="text-gray-200">${A.name}</span>
							</label>
						`).join("")}
					</div>
				`,v.appendChild(S)}});const y=document.createElement("div");y.className="mt-6 flex justify-end gap-3 border-t border-gray-700 pt-3",y.innerHTML=`
			<button class="px-4 py-2 text-gray-400 hover:text-gray-300 rounded" id="cancel">Cancel</button>
			<button class="px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-500 transition-colors" id="add">Add Selected Columns</button>
		`,a.appendChild(s),a.appendChild(n),a.appendChild(y),document.body.appendChild(a),a.querySelector("#cancel").onclick=()=>a.close(),a.querySelector("#add").onclick=()=>{const m=Array.from(a.querySelectorAll("input:checked")).map(j=>({id:j.value,name:j.dataset.name,visible:!0}));E(ca,[...e(ca),...m]),a.close()},a.showModal()}function rr(a){const s=a.originalTarget;if(s){const n=s.getBoundingClientRect(),v=window.scrollY+n.top-100;window.scrollTo({top:v,behavior:"smooth"})}}let Ha=ue([]);function bt(a,s="success"){E(Ha,[...e(Ha),{message:a,type:s,id:Date.now()}]),setTimeout(()=>{E(Ha,e(Ha).slice(1))},3e3)}function sr(a,s){var v,y,m,j,S,A,F;return[a==null?void 0:a.maxdamage,a==null?void 0:a.health,(v=a==null?void 0:a[s])==null?void 0:v.maxdamage,(y=a==null?void 0:a[s])==null?void 0:y.health,(S=(j=(m=a==null?void 0:a.data)==null?void 0:m[s])==null?void 0:j[s])==null?void 0:S.maxdamage,(F=(A=a==null?void 0:a.data)==null?void 0:A[s])==null?void 0:F.maxdamage].find(Z=>Z!==void 0)||0}function xt(a,s){var v,y,m,j,S,A,F,Z,ie,ne,ge,ea,Ee,je,V,_e,Se,ee,L,be,ae,de,xe,Sa,pa,ma,ua,aa,ja,ta,ha,qe,fa,ga,Na,ze,G,$,ra,_a,We,ve,sa,b,l,g,h,q,te;return[a==null?void 0:a.buildcostmetal,(v=a==null?void 0:a[s])==null?void 0:v.buildcostmetal,(j=(m=(y=a==null?void 0:a.data)==null?void 0:y[s])==null?void 0:m[s])==null?void 0:j.buildcostmetal,(A=(S=a==null?void 0:a.data)==null?void 0:S[s])==null?void 0:A.buildcostmetal,(ne=(ie=(Z=(F=f())==null?void 0:F[s])==null?void 0:Z.data)==null?void 0:ie[s])==null?void 0:ne.buildcostmetal,(V=(je=(Ee=(ea=(ge=f())==null?void 0:ge[s])==null?void 0:ea.data)==null?void 0:Ee[s])==null?void 0:je[s])==null?void 0:V.buildcostmetal,(_e=a==null?void 0:a.cost)==null?void 0:_e.metal,(ee=(Se=a==null?void 0:a[s])==null?void 0:Se.cost)==null?void 0:ee.metal,(ae=(be=(L=a==null?void 0:a.data)==null?void 0:L[s])==null?void 0:be.cost)==null?void 0:ae.metal,(pa=(Sa=(xe=(de=a==null?void 0:a.data)==null?void 0:de[s])==null?void 0:xe[s])==null?void 0:Sa.cost)==null?void 0:pa.metal,(ta=(ja=(aa=(ua=(ma=f())==null?void 0:ma[s])==null?void 0:ua.data)==null?void 0:aa[s])==null?void 0:ja.cost)==null?void 0:ta.metal,(ze=(Na=(ga=(fa=(qe=(ha=f())==null?void 0:ha[s])==null?void 0:qe.data)==null?void 0:fa[s])==null?void 0:ga[s])==null?void 0:Na.cost)==null?void 0:ze.metal,a==null?void 0:a.metalcost,(G=a==null?void 0:a[s])==null?void 0:G.metalcost,(We=(_a=(ra=($=f())==null?void 0:$[s])==null?void 0:ra.data)==null?void 0:_a[s])==null?void 0:We.metalcost,(ve=a==null?void 0:a.customparams)==null?void 0:ve.buildcostmetal,(b=(sa=a==null?void 0:a[s])==null?void 0:sa.customparams)==null?void 0:b.buildcostmetal,(te=(q=(h=(g=(l=f())==null?void 0:l[s])==null?void 0:g.data)==null?void 0:h[s])==null?void 0:q.customparams)==null?void 0:te.buildcostmetal].find(W=>W!=null)||0}lt(()=>e(C),()=>{E(fe,Qt(e(C)))}),lt(()=>(e(C),f(),z(),it),()=>{E(Me,e(C).map(a=>{var y,m,j,S,A,F,Z,ie,ne,ge,ea,Ee,je,V;if(!a)return null;const s=((j=(m=(y=f())==null?void 0:y[a])==null?void 0:m.data)==null?void 0:j[a])||{},n=Bt(s==null?void 0:s.weapondefs),v=Ot(n,s,a);return{id:a,name:((F=(A=(S=z())==null?void 0:S.units)==null?void 0:A.names)==null?void 0:F[a])||a,data:s,faction:(ie=(Z=f())==null?void 0:Z[a])==null?void 0:ie.faction,type:(ge=(ne=f())==null?void 0:ne[a])==null?void 0:ge.type,subtype:(Ee=(ea=f())==null?void 0:ea[a])==null?void 0:Ee.subtype,weapons:n,combatStats:v,tech:(V=(je=f())==null?void 0:je[a])==null?void 0:V.tech_level,isSuicideUnit:Pt(s),isMineUnit:it(s)}}))}),lt(()=>(e(De),e(ca)),()=>{e(De).forEach(a=>{if(a.field&&!e(ca).some(s=>s.id===a.field)){const s=Ia.flatMap(n=>n.fields).find(n=>n.id===a.field);s&&E(ca,[...e(ca),{id:s.id,name:s.name,visible:!0}])}})}),cr(),wr();var et=As(),yt=r(et);ur(yt);var at=o(yt,2),tt=r(at),ht=r(tt),lr=o(ht,2);t(tt);var rt=o(tt,2),st=r(rt),wt=o(st,2);t(rt);var or=o(rt,2);{var ir=a=>{var s=Yr(),n=r(s),v=r(n),y=r(v);ot(y),mr(2),t(v),t(n);var m=o(n,2),j=r(m),S=o(r(j),2);c(()=>{e(Pa),ya(()=>{})});var A=r(S);A.value=(A.__value="all")==null?"":"all";var F=o(A);F.value=(F.__value="1")==null?"":"1";var Z=o(F);Z.value=(Z.__value="2")==null?"":"2",t(S),t(j);var ie=o(j,2),ne=o(r(ie),2);c(()=>{e(Ea),ya(()=>{})});var ge=r(ne);ge.value=(ge.__value="all")==null?"":"all";var ea=o(ge);X(ea,1,Zt,I,(b,l)=>{var g=Nr(),h={},q=r(g,!0);t(g),c(()=>{h!==(h=e(l))&&(g.value=(g.__value=e(l))==null?"":e(l)),p(q,e(l))}),i(b,g)}),t(ne),t(ie);var Ee=o(ie,2),je=o(r(Ee),2);c(()=>{e(Ra),ya(()=>{})});var V=r(je);V.value=(V.__value="all")==null?"":"all";var _e=o(V);X(_e,1,It,I,(b,l)=>{var g=Ar(),h={},q=r(g,!0);t(g),c(()=>{h!==(h=e(l))&&(g.value=(g.__value=e(l))==null?"":e(l)),p(q,e(l))}),i(b,g)}),t(je),t(Ee);var Se=o(Ee,2),ee=o(r(Se),2);c(()=>{e(Fa),ya(()=>{})});var L=r(ee);L.value=(L.__value="all")==null?"":"all";var be=o(L);be.value=(be.__value="arm")==null?"":"arm";var ae=o(be);ae.value=(ae.__value="cor")==null?"":"cor",t(ee),t(Se),t(m);var de=o(m,2),xe=r(de),Sa=o(r(xe),2);t(xe);var pa=o(xe,2);{var ma=b=>{var l=Er();X(l,5,()=>e(De),I,(g,h,q)=>{var te=Vr(),W=r(te);c(()=>{e(h),ya(()=>{})});var B=r(W);B.value=((B.__value="")==null,"");var Y=o(B);X(Y,1,()=>Ia,I,(pe,Pe)=>{var se=Ur();X(se,5,()=>e(Pe).fields,I,(Re,Ne)=>{var Ye=Tr(),Ge={},ye=r(Ye,!0);t(Ye),c(()=>{Ge!==(Ge=e(Ne).id)&&(Ye.value=(Ye.__value=e(Ne).id)==null?"":e(Ne).id),p(ye,e(Ne).name)}),i(Re,Ye)}),t(se),c(()=>Ua(se,"label",e(Pe).category)),i(pe,se)}),t(W);var Be=o(W,2);c(()=>{e(h),ya(()=>{})});var wa=r(Be);wa.value=(wa.__value=">")==null?"":">";var ka=o(wa);ka.value=(ka.__value="<")==null?"":"<";var ce=o(ka);ce.value=(ce.__value="=")==null?"":"=",t(Be);var T=o(Be,2);ot(T);var Oe=o(T,2);t(te),Ba(W,()=>e(h).field,pe=>(e(h).field=pe,ya(()=>e(De)))),Ba(Be,()=>e(h).operator,pe=>(e(h).operator=pe,ya(()=>e(De)))),Lt(T,()=>e(h).value,pe=>(e(h).value=pe,ya(()=>e(De)))),Ie("click",Oe,()=>er(q)),i(g,te)}),t(l),i(b,l)};x(pa,b=>{e(De).length>0&&b(ma)})}t(de);var ua=o(de,2),aa=r(ua),ja=o(r(aa),2);t(aa);var ta=o(aa,2);X(ta,5,()=>e(ca),I,(b,l,g)=>{var h=zr(),q=r(h);ot(q);var te=o(q,2),W=r(te,!0);t(te),t(h),c(()=>p(W,e(l).name)),Mr(q,()=>e(l).visible,B=>(e(l).visible=B,ya(()=>e(ca)))),i(b,h)}),t(ta),t(ua);var ha=o(ua,2),qe=r(ha),fa=r(qe),ga=r(fa),Na=r(ga);{var ze=b=>{var l=Br();i(b,l)},G=b=>{var l=Or();i(b,l)};x(Na,b=>{e(za)?b(ze):b(G,!1)})}t(ga);var $=o(ga);t(fa),t(qe);var ra=o(qe,2),_a=r(ra),We=r(_a),ve=r(We);X(ve,5,()=>e(ca).filter(b=>b.visible),I,(b,l)=>{var g=Rr(),h=r(g),q=r(h),te=o(q);{var W=B=>{var Y=Pr();c(()=>br(Y,`h-4 w-4 transition-transform ${(e($a)==="desc"?"rotate-180":"")??""}`)),i(B,Y)};x(te,B=>{e(La)===(e(l).id==="unit"?"name":e(l).id)&&B(W)})}t(h),t(g),c(()=>{$e(g,`cursor-pointer whitespace-nowrap p-3 text-left text-gray-400 hover:text-white ${(e(l).id==="unit"?"sticky left-0 z-30 min-w-[250px] bg-gray-900/95 backdrop-blur-sm":"")??""}`),p(q,`${e(l).name??""} `)}),Ie("click",g,()=>ar(e(l))),i(b,g)}),t(ve),t(We);var sa=o(We);X(sa,5,Xt,I,(b,l)=>{var g=Wr(),h=r(g),q=r(h),te=r(q),W=r(te);const B=Ma(()=>`rounded-lg ${(e(C).includes(e(l).id)?"bg-red-600/20 hover:bg-red-600/30":"bg-teal-600/20 hover:bg-teal-600/30")??""} px-2 py-1 text-xs flex items-center gap-1.5 group`);c(()=>Ua(W,"aria-label",e(C).includes(e(l).id)?"Remove from comparison":"Add to comparison"));var Y=r(W);const Be=Ma(()=>e(C).includes(e(l).id)?"text-red-400":"text-teal-400");var wa=r(Y),ka=r(wa);{var ce=_=>{var N=Fr();i(_,N)},T=_=>{var N=Lr();i(_,N)};x(ka,_=>{e(C).includes(e(l).id)?_(ce):_(T,!1)})}t(wa),t(Y);var Oe=o(Y,2),pe=r(Oe,!0);c(()=>p(pe,e(C).includes(e(l).id)?"Remove":"Compare")),t(Oe),t(W);var Pe=o(W,2),se=r(Pe,!0);t(Pe),t(te);var Re=o(te,2),Ne=r(Re),Ye=r(Ne,!0);t(Ne);var Ge=o(Ne,2),ye=r(Ge,!0);t(Ge);var le=o(Ge,2);{var Je=_=>{var N=$r(),H=r(N,!0);t(N),c(()=>p(H,e(l).subtype)),i(_,N)};x(le,_=>{e(l).subtype&&e(l).subtype!=="none"&&_(Je)})}var la=o(le,2),Ca=r(la);t(la);var P=o(la,2);{var he=_=>{var N=Hr(),H=r(N,!0);t(N),c(()=>p(H,e(l).isMineUnit?"Mine":"Suicide")),i(_,N)};x(P,_=>{e(l).isSuicideUnit&&_(he)})}t(Re),t(q),t(h);var Ae=o(h);X(Ae,1,()=>e(ca).filter(_=>_.visible&&_.id!=="unit"),I,(_,N)=>{var H=qr(),Qe=r(H);{var oa=J=>{var O=Ve();const re=Ma(()=>{var Fe,w,M,Q,me,na,we,oe,k,U,K,ke,Le,Te,Ke,da,Xe,Ue,Ze,ba,xa,Aa,Ta,qa,Ct,Mt,jt,St,Nt,At,Tt,Ut,Vt,Et;return[(Q=(M=(w=(Fe=f())==null?void 0:Fe[e(l).id])==null?void 0:w.data)==null?void 0:M[e(l).id])==null?void 0:Q.buildcostmetal,(k=(oe=(we=(na=(me=f())==null?void 0:me[e(l).id])==null?void 0:na.data)==null?void 0:we[e(l).id])==null?void 0:oe[e(l).id])==null?void 0:k.buildcostmetal,(K=(U=f())==null?void 0:U[e(l).id])==null?void 0:K.buildcostmetal,(da=(Ke=(Te=(Le=(ke=f())==null?void 0:ke[e(l).id])==null?void 0:Le.data)==null?void 0:Te[e(l).id])==null?void 0:Ke.cost)==null?void 0:da.metal,(Aa=(xa=(ba=(Ze=(Ue=(Xe=f())==null?void 0:Xe[e(l).id])==null?void 0:Ue.data)==null?void 0:Ze[e(l).id])==null?void 0:ba[e(l).id])==null?void 0:xa.cost)==null?void 0:Aa.metal,(Mt=(Ct=(qa=(Ta=f())==null?void 0:Ta[e(l).id])==null?void 0:qa.data)==null?void 0:Ct[e(l).id])==null?void 0:Mt.metalcost,(Tt=(At=(Nt=(St=(jt=f())==null?void 0:jt[e(l).id])==null?void 0:St.data)==null?void 0:Nt[e(l).id])==null?void 0:At.customparams)==null?void 0:Tt.buildcostmetal,(Ut=e(l).data)==null?void 0:Ut.buildcostmetal,(Et=(Vt=e(l).data)==null?void 0:Vt[e(l).id])==null?void 0:Et.buildcostmetal]});c(()=>p(O,e(re).find(Fe=>Fe!=null)||xt(e(l).data,e(l).id)||0)),i(J,O)},ia=J=>{var O=va(),re=Ce(O);{var Fe=M=>{var Q=va(),me=Ce(Q);{var na=oe=>{var k=Ve();c(()=>{var U,K,ke,Le;return p(k,(Le=(ke=(K=(U=f())==null?void 0:U[e(l).id])==null?void 0:K.data)==null?void 0:ke[e(l).id])==null?void 0:Le[e(N).id])}),i(oe,k)},we=oe=>{var k=va(),U=Ce(k);{var K=Le=>{var Te=Ve();c(()=>{var Ke,da,Xe,Ue;return p(Te,(Ue=(Xe=(da=(Ke=f())==null?void 0:Ke[e(l).id])==null?void 0:da.data)==null?void 0:Xe[e(l).id])==null?void 0:Ue.maxdamage)}),i(Le,Te)},ke=Le=>{var Te=va(),Ke=Ce(Te);{var da=Ue=>{var Ze=Ve();c(()=>{var ba,xa,Aa,Ta,qa;return p(Ze,(qa=(Ta=(Aa=(xa=(ba=f())==null?void 0:ba[e(l).id])==null?void 0:xa.data)==null?void 0:Aa[e(l).id])==null?void 0:Ta[e(l).id])==null?void 0:qa.maxdamage)}),i(Ue,Ze)},Xe=Ue=>{var Ze=Ve();Ze.nodeValue="0",i(Ue,Ze)};x(Ke,Ue=>{var Ze,ba,xa,Aa,Ta;((Ta=(Aa=(xa=(ba=(Ze=f())==null?void 0:Ze[e(l).id])==null?void 0:ba.data)==null?void 0:xa[e(l).id])==null?void 0:Aa[e(l).id])==null?void 0:Ta.maxdamage)!==void 0?Ue(da):Ue(Xe,!1)},!0)}i(Le,Te)};x(U,Le=>{var Te,Ke,da,Xe;((Xe=(da=(Ke=(Te=f())==null?void 0:Te[e(l).id])==null?void 0:Ke.data)==null?void 0:da[e(l).id])==null?void 0:Xe.maxdamage)!==void 0?Le(K):Le(ke,!1)},!0)}i(oe,k)};x(me,oe=>{var k,U,K,ke;((ke=(K=(U=(k=f())==null?void 0:k[e(l).id])==null?void 0:U.data)==null?void 0:K[e(l).id])==null?void 0:ke[e(N).id])!==void 0?oe(na):oe(we,!1)})}i(M,Q)},w=M=>{var Q=Ve();c(()=>p(Q,Da(e(l)[e(N).id],e(N).id))),i(M,Q)};x(re,M=>{e(N).id==="maxdamage"||e(N).id==="health"?M(Fe):M(w,!1)},!0)}i(J,O)};x(Qe,J=>{e(N).id==="buildcostmetal"?J(oa):J(ia,!1)})}t(H),i(_,H)}),t(g),c(()=>{$e(W,e(B)),$e(Y,e(Be)),Ua(Pe,"href",`${nt??""}/unit?name=${e(l).id??""}`),p(se,e(l).name),p(Ye,e(l).faction==="arm"?"ARM":"COR"),p(ye,e(l).type),p(Ca,`T${e(l).tech??""}`)}),Ie("click",W,()=>{if(e(C).includes(e(l).id)){for(E(C,e(C).filter(_=>_&&_!==e(l).id).concat(e(C).length<2?[""]:[]));e(C).length<2;)E(C,[...e(C),""]);bt(`Removed ${e(l).name} from comparison`)}else{const _=e(C).findIndex(N=>!N);_>=0?(zt(C,e(C)[_]=e(l).id),E(C,e(C))):E(C,[...e(C),e(l).id]),bt(`Added ${e(l).name} to comparison`)}}),i(b,g)}),t(sa),t(_a),t(ra),t(ha),t(s),c(()=>{$e(ha,`relative ${(e(za)?"fullscreen-container":"")??""} svelte-10uyojr`),Ua(fa,"aria-label",e(za)?"Exit fullscreen":"Enter fullscreen"),p($,` ${(e(za)?"Exit Fullscreen":"Fullscreen")??""}`),$e(ra,`overflow-x-auto ${(e(za)?"fullscreen-table":"max-h-[70vh]")??""} svelte-10uyojr`)}),Lt(y,()=>e(Ga),b=>E(Ga,b)),Ba(S,()=>e(Pa),b=>E(Pa,b)),Ba(ne,()=>e(Ea),b=>E(Ea,b)),Ba(je,()=>e(Ra),b=>E(Ra,b)),Ba(ee,()=>e(Fa),b=>E(Fa,b)),Ie("click",Sa,Dt),Ie("click",ja,tr),Ie("click",fa,Kt),i(a,s)},nr=a=>{var s=Ss(),n=o(r(s),2),v=r(n),y=r(v);X(y,1,()=>e(C),I,(F,Z,ie)=>{var ne=Qr(),ge=r(ne),ea=r(ge);ea.textContent=`Unit ${ie+1}`;var Ee=o(ea,2);{var je=ee=>{var L=Gr();Ie("click",L,()=>Jt(ie)),i(ee,L)};x(Ee,ee=>{e(C).length>2&&ee(je)})}t(ge);var V=o(ge,2);c(()=>{e(C),ya(()=>{e(Ja)})});var _e=r(V);_e.value=((_e.__value="")==null,"");var Se=o(_e);X(Se,1,()=>e(Ja),I,(ee,L)=>{var be=Jr(),ae={},de=r(be);t(be),c(()=>{ae!==(ae=e(L).id)&&(be.value=(be.__value=e(L).id)==null?"":e(L).id),p(de,`${e(L).name??""}
											[${(e(L).faction==="arm"?"ARM":"COR")??""}] [${e(L).type??""}
											${(e(L).subtype!=="none"?`/${e(L).subtype}`:"")??""}] [T${e(L).tech??""}]`)}),i(ee,be)}),t(V),t(ne),Ba(V,()=>e(C)[ie],ee=>zt(C,e(C)[ie]=ee)),i(F,ne)});var m=o(y,2);t(v),t(n);var j=o(n,2);{var S=F=>{var Z=Ms(),ie=r(Z),ne=r(ie),ge=r(ne),ea=o(r(ge));X(ea,1,()=>e(Me),I,(je,V,_e)=>{var Se=Dr(),ee=r(Se);{var L=ae=>{var de=Zr(),xe=r(de),Sa=r(xe,!0);t(xe);var pa=o(xe,2),ma=r(pa),ua=r(ma,!0);t(ma);var aa=o(ma,2),ja=r(aa,!0);t(aa);var ta=o(aa,2);{var ha=ze=>{var G=Kr(),$=r(G,!0);t(G),c(()=>p($,e(V).subtype)),i(ze,G)};x(ta,ze=>{e(V).subtype&&e(V).subtype!=="none"&&ze(ha)})}var qe=o(ta,2),fa=r(qe);t(qe);var ga=o(qe,2);{var Na=ze=>{var G=Xr(),$=r(G,!0);t(G),c(()=>p($,e(V).isMineUnit?"Mine":"Suicide")),i(ze,G)};x(ga,ze=>{var G;(G=e(V))!=null&&G.isSuicideUnit&&ze(Na)})}t(pa),t(de),c(()=>{Ua(xe,"href",`${nt??""}/unit?name=${e(V).id??""}`),p(Sa,e(V).name),p(ua,e(V).faction==="arm"?"Armada":"Cortex"),p(ja,e(V).type),p(fa,`Tech ${e(V).tech??""}`)}),i(ae,de)},be=ae=>{var de=Ir();i(ae,de)};x(ee,ae=>{e(V)?ae(L):ae(be,!1)})}t(Se),c(()=>$e(Se,`w-1/4 min-w-[300px] bg-gray-800/95 p-4 backdrop-blur-sm ${(_e===e(Me).length-1?"rounded-tr-lg":"")??""}`)),i(je,Se)}),t(ge),t(ne);var Ee=o(ne);X(Ee,5,()=>Object.entries(e(fe)),I,(je,V)=>{let _e=()=>e(V)[0],Se=()=>e(V)[1];var ee=va(),L=Ce(ee);{var be=ae=>{var de=Cs(),xe=Ce(de);const Sa=Ma(()=>`${gt(_e())??""} svelte-10uyojr`);var pa=r(xe),ma=r(pa),ua=r(ma);const aa=Ma(()=>`absolute inset-0 ${gt(_e())??""} svelte-10uyojr`);var ja=o(ua,2),ta=r(ja),ha=r(ta);c(()=>Ua(ha,"d",_t(_e()))),t(ta);var qe=o(ta,2),fa=r(qe,!0);t(qe),t(ja),t(ma),t(pa),t(xe);var ga=o(xe,2);{var Na=G=>{var $=va(),ra=Ce($);{var _a=We=>{var ve=ds(),sa=o(r(ve));X(sa,1,()=>e(Me),I,(b,l)=>{var g=ns(),h=r(g),q=r(h);{var te=B=>{var Y=os(),Be=Ce(Y);{var wa=ce=>{var T=es(),Oe=r(T),pe=r(Oe);t(Oe);var Pe=o(Oe,2),se=r(Pe);t(Pe),t(T),c(()=>{p(pe,`DPS: ${e(l).combatStats.totalDps??""}`),p(se,`Range: ${e(l).combatStats.maxRange??""}`)}),i(ce,T)};x(Be,ce=>{e(l).combatStats&&ce(wa)})}var ka=o(Be,2);X(ka,5,()=>e(l).weapons,I,(ce,T)=>{var Oe=ls(),pe=r(Oe),Pe=r(pe),se=o(Pe);{var Re=w=>{var M=as();i(w,M)};x(se,w=>{e(T).isEMP&&w(Re)})}var Ne=o(se,2);{var Ye=w=>{var M=ts();i(w,M)};x(Ne,w=>{e(T).isNotFlame&&w(Ye)})}t(pe);var Ge=o(pe,2),ye=r(Ge),le=o(r(ye),2),Je=r(le,!0);t(le),t(ye);var la=o(ye,2),Ca=o(r(la),2),P=r(Ca);{var he=w=>{var M=Ve("N/A (EMP)");i(w,M)},Ae=w=>{var M=va(),Q=Ce(M);{var me=we=>{var oe=Ve("N/A (Special)");i(we,oe)},na=we=>{var oe=Ve();c(()=>p(oe,e(T).dps)),i(we,oe)};x(Q,we=>{e(T).isNotFlame?we(me):we(na,!1)},!0)}i(w,M)};x(P,w=>{e(T).isEMP?w(he):w(Ae,!1)})}t(Ca),t(la);var _=o(la,2);{var N=w=>{var M=rs(),Q=Ce(M),me=r(Q),na=r(me,!0);c(()=>p(na,Va("paralyzemultiplier"))),t(me);var we=o(me,2),oe=r(we);t(we),t(Q);var k=o(Q,2),U=o(r(k),2),K=r(U,!0);t(U),t(k),c(()=>{p(oe,`x${e(T).paralyzeMultiplier??""}`),p(K,e(T).paralyzeDps)}),i(w,M)};x(_,w=>{e(T).isEMP&&w(N)})}var H=o(_,2);{var Qe=w=>{var M=ss(),Q=o(r(M),2),me=r(Q);t(Q),t(M),c(()=>p(me,`x${e(T).burstCount??""}`)),i(w,M)};x(H,w=>{e(T).burstCount>1&&w(Qe)})}var oa=o(H,2),ia=o(r(oa),2),J=r(ia,!0);t(ia),t(oa);var O=o(oa,2),re=o(r(O),2),Fe=r(re);t(re),t(O),t(Ge),t(Oe),c(()=>{p(Pe,`${e(T).type??""} `),p(Je,e(T).damage),p(J,e(T).range),p(Fe,`${e(T).reloadTime??""}s`)}),i(ce,Oe)}),t(ka),i(B,Y)},W=B=>{var Y=is();i(B,Y)};x(q,B=>{var Y,Be;((Be=(Y=e(l))==null?void 0:Y.weapons)==null?void 0:Be.length)>0?B(te):B(W,!1)})}t(h),t(g),i(b,g)}),t(ve),i(We,ve)};x(ra,We=>{e(Me).some(ve=>{var sa;return((sa=ve==null?void 0:ve.weapons)==null?void 0:sa.length)>0})&&We(_a)})}i(G,$)};x(ga,G=>{_e()==="combat"&&G(Na)})}var ze=o(ga,2);X(ze,1,Se,I,(G,$)=>{var ra=ks();const _a=Ma(()=>e(Me).map(l=>{var g;return(g=l==null?void 0:l.data)==null?void 0:g[e($)]})),We=Ma(()=>e(_a).every(l=>l===e(_a)[0]));var ve=r(ra),sa=r(ve,!0);c(()=>p(sa,Va(e($)))),t(ve);var b=o(ve);X(b,1,()=>e(_a),I,(l,g)=>{var h=ws(),q=r(h);{var te=B=>{var Y=vs();i(B,Y)},W=B=>{var Y=va(),Be=Ce(Y);{var wa=ce=>{var T=va(),Oe=Ce(T);{var pe=se=>{var Re=ys(),Ne=Ce(Re);{var Ye=le=>{var Je=us();X(Je,5,()=>Object.entries(e(g)),I,(la,Ca)=>{let P=()=>e(Ca)[1];var he=ms();const Ae=Ma(()=>{var k;return((k=f())==null?void 0:k[P()])||{}}),_=Ma(()=>{var k,U;return((U=(k=e(Ae))==null?void 0:k.data)==null?void 0:U[P()])||{}}),N=Ma(()=>{var k;return((k=e(Ae))==null?void 0:k.tech_level)||1});var H=r(he),Qe=r(H,!0);c(()=>p(Qe,P().slice(0,2).toUpperCase())),t(H);var oa=o(H,2),ia=r(oa),J=r(ia),O=r(J,!0);t(J);var re=o(J,2),Fe=r(re);t(re),t(ia);var w=o(ia,2),M=r(w),Q=r(M,!0);t(M);var me=o(M,2);{var na=k=>{var U=cs(),K=r(U,!0);t(U),c(()=>p(K,e(Ae).type)),i(k,U)};x(me,k=>{var U;(U=e(Ae))!=null&&U.type&&k(na)})}t(w);var we=o(w,2);{var oe=k=>{var U=ps(),K=r(U),ke=o(r(K),2),Le=r(ke,!0);c(()=>p(Le,sr(e(_),P()))),t(ke),t(K);var Te=o(K,2),Ke=o(r(Te),2),da=r(Ke,!0);c(()=>p(da,xt(e(_),P()))),t(Ke),t(Te);var Xe=o(Te,2),Ue=o(r(Xe),2),Ze=r(Ue,!0);c(()=>{var ba,xa;return p(Ze,(ba=e(_)[P()])!=null&&ba.buildtime||e(_).buildtime?Rt(((xa=e(_)[P()])==null?void 0:xa.buildtime)||e(_).buildtime,"buildtime"):"0s")}),t(Ue),t(Xe),t(U),i(k,U)};x(we,k=>{e(_)&&k(oe)})}t(oa),t(he),c(()=>{var k,U,K,ke;Ua(he,"href",`${nt??""}/unit?name=${P()??""}`),p(O,((K=(U=(k=z())==null?void 0:k.units)==null?void 0:U.names)==null?void 0:K[P()])||P()),p(Fe,`T${e(N)??""}`),p(Q,((ke=e(Ae))==null?void 0:ke.faction)==="arm"?"ARM":"COR")}),i(la,he)}),t(Je),i(le,Je)},Ge=le=>{var Je=xs();X(Je,5,()=>ft(e(g)),I,(Ca,P)=>{let he=()=>e(P).key,Ae=()=>e(P).value;var _=bs(),N=r(_),H=r(N);c(()=>p(H,`${Va(he())??""}:`)),t(N);var Qe=o(N,2);{var oa=J=>{var O=gs();X(O,5,Ae,I,(re,Fe)=>{var w=fs(),M=r(w),Q=r(M);c(()=>p(Q,`${Va(e(Fe).key)??""}:`)),t(M);var me=o(M,2),na=r(me,!0);t(me),t(w),c(()=>p(na,e(Fe).value)),i(re,w)}),t(O),i(J,O)},ia=J=>{var O=_s(),re=r(O,!0);t(O),c(()=>p(re,Ae())),i(J,O)};x(Qe,J=>{Array.isArray(Ae())?J(oa):J(ia,!1)})}t(_),i(Ca,_)}),t(Je),i(le,Je)};x(Ne,le=>{e($)==="buildoptions"?le(Ye):le(Ge,!1)})}var ye=o(Ne,2);Ie("click",ye,()=>ut(e($))),i(se,Re)},Pe=se=>{var Re=hs(),Ne=r(Re);{var Ye=ye=>{var le=Ve();c(()=>p(le,`View Build Options (${Object.keys(e(g)).length??""})`)),i(ye,le)},Ge=ye=>{var le=va(),Je=Ce(le);{var la=P=>{var he=Ve();c(()=>p(he,`View Weapon Definitions (${Object.keys(e(g)).length??""})`)),i(P,he)},Ca=P=>{var he=va(),Ae=Ce(he);{var _=H=>{var Qe=Ve();c(()=>p(Qe,`View Weapons (${Object.keys(e(g)).length??""})`)),i(H,Qe)},N=H=>{var Qe=va(),oa=Ce(Qe);{var ia=O=>{var re=Ve();c(()=>p(re,`View Custom Parameters (${Object.keys(e(g)).length??""})`)),i(O,re)},J=O=>{var re=Ve();c(()=>p(re,`View Details (${Object.keys(e(g)).length??""})`)),i(O,re)};x(oa,O=>{e($)==="customparams"?O(ia):O(J,!1)},!0)}i(H,Qe)};x(Ae,H=>{e($)==="weapons"?H(_):H(N,!1)},!0)}i(P,he)};x(Je,P=>{e($)==="weapondefs"?P(la):P(Ca,!1)},!0)}i(ye,le)};x(Ne,ye=>{e($)==="buildoptions"?ye(Ye):ye(Ge,!1)})}t(Re),Ie("click",Re,()=>ut(e($))),i(se,Re)};x(Oe,se=>{e(Oa).has(e($))?se(pe):se(Pe,!1)})}i(ce,T)},ka=ce=>{var T=Ve();c(()=>p(T,Rt(e(g),e($)))),i(ce,T)};x(Be,ce=>{typeof e(g)=="object"&&e(g)!==null?ce(wa):ce(ka,!1)},!0)}i(B,Y)};x(q,B=>{e(g)===void 0||e(g)===null?B(te):B(W,!1)})}t(h),c(()=>$e(h,`p-4 text-center ${(!e(We)&&e(g)!==void 0?"font-medium":"")??""} ${(e(We)?"text-gray-300":"text-white")??""}`)),i(l,h)}),t(ra),i(G,ra)}),c(()=>{$e(xe,e(Sa)),Ua(pa,"colspan",e(Me).length+1),$e(ua,e(aa)),p(fa,_e())}),i(ae,de)};x(L,ae=>{Se().length>0&&ae(be)})}i(je,ee)}),t(Ee),t(ie),t(Z),Ie("mouseenter",Z,rr),i(F,Z)},A=F=>{var Z=js();i(F,Z)};x(j,F=>{e(Me).some(Z=>Z)?F(S):F(A,!1)})}t(s),Ie("click",m,Gt),i(a,s)};x(or,a=>{e(He)==="browse"?a(ir):a(nr,!1)})}t(at);var kt=o(at,2);X(kt,5,()=>e(Ha),a=>a.id,(a,s)=>{var n=Ns(),v=r(n,!0);t(n),c(()=>{$e(n,`rounded-lg bg-gray-900 px-4 py-3 text-sm shadow-lg ring-1 ${(e(s).type==="success"?"text-teal-400 ring-teal-500/50":"text-red-400 ring-red-500/50")??""}`),p(v,e(s).message)}),xr(3,n,()=>yr,()=>({y:20,duration:300})),i(a,n)}),t(kt),t(et),c(()=>{$e(ht,`rounded-xl bg-gray-800/50 p-6 ${(e(He)==="browse"?"ring-2 ring-teal-500/50":"")??""}`),$e(lr,`rounded-xl bg-gray-800/50 p-6 ${(e(He)==="compare"?"ring-2 ring-teal-500/50":"")??""}`),$e(st,`rounded-lg px-6 py-3 font-medium transition-all ${(e(He)==="browse"?"bg-teal-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700")??""}`),$e(wt,`rounded-lg px-6 py-3 font-medium transition-all ${(e(He)==="compare"?"bg-teal-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700")??""}`)}),Ie("click",st,()=>E(He,"browse")),Ie("click",wt,()=>E(He,"compare")),i(d,et),pr()}export{Ws as component};
